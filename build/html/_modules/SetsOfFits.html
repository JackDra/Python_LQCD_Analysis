

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SetsOfFits &mdash; LQCD Analysis Codebase TF Fits documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> LQCD Analysis Codebase
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Python_Analysis</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LQCD Analysis Codebase</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>SetsOfFits</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for SetsOfFits</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">Params</span> <span class="k">import</span> <span class="n">this_dir</span>
<span class="kn">from</span> <span class="nn">MiscFuns</span> <span class="k">import</span> <span class="n">ODNested</span>

<span class="kn">from</span> <span class="nn">BootStrapping</span> <span class="k">import</span> <span class="n">BootStrap</span><span class="p">,</span><span class="n">CombineBS</span>
<span class="kn">import</span> <span class="nn">FitFunctions</span> <span class="k">as</span> <span class="nn">ff</span>
<span class="c1"># from FitFunctions import Fitting</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pa</span>
<span class="kn">from</span> <span class="nn">Params</span> <span class="k">import</span> <span class="n">defPrec</span><span class="p">,</span><span class="n">defMaxIter</span><span class="p">,</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">Debug_Mode</span><span class="p">,</span><span class="n">nboot</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">copy</span>
<span class="kn">from</span> <span class="nn">MiscFuns</span> <span class="k">import</span> <span class="n">get_val_float</span>
<span class="kn">from</span> <span class="nn">XmlFormatting</span> <span class="k">import</span> <span class="n">xmlfitr</span>
<span class="kn">from</span> <span class="nn">TimeStuff</span> <span class="k">import</span> <span class="n">Timer</span>
<span class="kn">from</span> <span class="nn">XmlFormatting</span> <span class="k">import</span> <span class="n">unxmlfitr_int</span><span class="p">,</span><span class="n">MakeValAndErr</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">NullPlotData</span> <span class="k">import</span> <span class="n">null_series</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="k">import</span> <span class="n">warn</span>

<span class="n">MaxFitCutoff</span> <span class="o">=</span> <span class="mi">8</span>

<span class="c1">## keepkeys is for keeping track of &quot;fit funtions, fit ranges etc...&quot;</span>
<div class="viewcode-block" id="PullSOFSeries_Wpar"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.PullSOFSeries_Wpar">[docs]</a><span class="k">def</span> <span class="nf">PullSOFSeries_Wpar</span><span class="p">(</span><span class="n">this_series</span><span class="p">,</span><span class="n">keep_keys</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">this_series</span>
    <span class="n">outl</span><span class="p">,</span><span class="n">indexl</span> <span class="o">=</span> <span class="p">[],[]</span>
    <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">SOF_data</span> <span class="ow">in</span> <span class="n">this_series</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">fit_key</span><span class="p">,</span><span class="n">fit_data</span> <span class="ow">in</span> <span class="n">SOF_data</span><span class="o">.</span><span class="n">Get_Extrapolation</span><span class="p">(</span><span class="n">fmted</span><span class="o">=</span><span class="n">fmted</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">this_key</span> <span class="o">=</span> <span class="n">ikey</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ikey</span><span class="p">,)</span>
            <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">this_key</span><span class="p">)</span><span class="o">+</span><span class="nb">tuple</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fit_key</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">]))</span>
            <span class="n">outl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fit_data</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">this_series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">this_series</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;No labels set up for series&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="n">these_key_labs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Fit_Col_Names_fmt</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">])</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">these_key_labs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">])</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span>
        <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">indexl</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">these_key_labs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">outl</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span></div>



<div class="viewcode-block" id="PullSOFSeries"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.PullSOFSeries">[docs]</a><span class="k">def</span> <span class="nf">PullSOFSeries</span><span class="p">(</span><span class="n">this_series</span><span class="p">,</span><span class="n">keep_keys</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">this_series</span>
    <span class="n">outl</span><span class="p">,</span><span class="n">indexl</span> <span class="o">=</span> <span class="p">[],[]</span>
    <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">SOF_data</span> <span class="ow">in</span> <span class="n">this_series</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SOF_data</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">for</span> <span class="n">fit_key</span><span class="p">,</span><span class="n">fit_data</span> <span class="ow">in</span> <span class="n">SOF_data</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">this_key</span> <span class="o">=</span> <span class="n">ikey</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ikey</span><span class="p">,)</span>
                <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">this_key</span><span class="p">)</span><span class="o">+</span><span class="nb">tuple</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fit_key</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">]))</span>
                <span class="n">outl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fit_data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">SOF_data</span> <span class="ow">in</span> <span class="n">this_series</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SOF_data</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">for</span> <span class="n">fit_key</span><span class="p">,</span><span class="n">fit_data</span> <span class="ow">in</span> <span class="n">SOF_data</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">this_key</span> <span class="o">=</span> <span class="n">ikey</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ikey</span><span class="p">,)</span>
                <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">this_key</span><span class="p">)</span><span class="o">+</span><span class="nb">tuple</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fit_key</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">]))</span>
                <span class="n">outl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fit_data</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">this_series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">this_series</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;No labels set up for series&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="n">these_key_labs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Fit_Col_Names_fmt</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">these_key_labs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)[</span><span class="n">keep_keys</span><span class="p">])</span>
        <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">indexl</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">these_key_labs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">outl</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span></div>


<div class="viewcode-block" id="SetOfFitFuns"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns">[docs]</a><span class="k">class</span> <span class="nc">SetOfFitFuns</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    FFun(set) &quot;Inherits&quot; from Fitting in FitFunctions.py</span>



<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instances</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">parentlist</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>   <span class="bp">self</span><span class="p">,</span> <span class="n">thisPrec</span><span class="o">=</span><span class="n">defPrec</span><span class="p">,</span><span class="n">thisMI</span><span class="o">=</span><span class="n">defMaxIter</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thisPrec</span> <span class="o">=</span> <span class="n">thisPrec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thisMI</span> <span class="o">=</span> <span class="n">thisMI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ChiSorted</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ChiSorted_fmt</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">VaryFunctions</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">par_list</span> <span class="o">=</span> <span class="s1">&#39;Invalid&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        self.Fit_Col_Names DataFrame:</span>

<span class="sd">        columns =   Fitting, Chi2pdf,</span>

<span class="sd">        ## 1D case</span>
<span class="sd">        rows =      Function , iGuess , fit_min , fit_max</span>

<span class="sd">        ## 2D case &quot;shape&quot;</span>
<span class="sd">        rows =      Function , iGuess , fit_min , fit_max, shape</span>

<span class="sd">        ## 2D case &quot;box&quot;</span>
<span class="sd">        rows =      Function , iGuess , fit_min_1 , fit_max_1, fit_min_2, fit_max_2</span>

<span class="sd">        &#39;&#39;&#39;</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        self.Fit_Col_Names DataFrame:</span>

<span class="sd">        columns =   Fitting, Chi2pdf,</span>

<span class="sd">        ## 1D case</span>
<span class="sd">        rows =      Function , fitr#-#</span>

<span class="sd">        ## 2D case &quot;shape&quot;</span>
<span class="sd">        rows =      Function , fitr#-#, shape</span>

<span class="sd">        ## 2D case &quot;box&quot;</span>
<span class="sd">        rows =      Function , fitr#-#, fittwor#-#</span>
<span class="sd">        &#39;&#39;&#39;</span>


        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ImportData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1">## Pull out a specific row for multiindex please!!</span>
    <span class="c1">## xdata  shape [ npar_fit , fit_index ]</span>
    <span class="c1">## ydata  shape [ fit_index_1 , fit_index_2 , ...]</span>
    <span class="c1">## currently only implemented for 2d fits</span>
<div class="viewcode-block" id="SetOfFitFuns.ImportData_Series"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ImportData_Series">[docs]</a>    <span class="k">def</span> <span class="nf">ImportData_Series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">read_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">read_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">):</span>
            <span class="n">xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">read_data</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">read_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">get_val_float</span><span class="p">(</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">xdata</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">read_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float</span><span class="p">,</span><span class="n">ix</span><span class="p">))</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">xdata</span><span class="p">])))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])))]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;Sets of fits not implemented for more than 2 fit parameters&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">read_data</span><span class="o">.</span><span class="n">index</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="n">read_data</span><span class="o">.</span><span class="n">values</span></div>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Imports data for fitting:</span>
<span class="sd">    acceptable formats:</span>

<span class="sd">    read_data = pa.DataFrame()</span>
<span class="sd">    columns = xdata,ydata</span>
<span class="sd">    N.B. for some reason they have to be inside a 1-D array, i.e. pass in [xdata]</span>

<span class="sd">    &#39;&#39;&#39;</span>
<div class="viewcode-block" id="SetOfFitFuns.ImportData"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ImportData">[docs]</a>    <span class="k">def</span> <span class="nf">ImportData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">read_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">read_data</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">read_data</span><span class="p">[</span><span class="s1">&#39;xdata&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">read_data</span><span class="p">[</span><span class="s1">&#39;ydata&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">read_data</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ImportData_Series</span><span class="p">(</span><span class="n">read_data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">read_data</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span><span class="p">:</span>
            <span class="c1">## also initialises :)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RemoveData</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xbooted</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">read_data</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ImportData</span><span class="p">(</span><span class="o">*</span><span class="n">read_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;unrecognised type for fitting&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">read_data</span><span class="p">)))</span>
        <span class="c1">## convention is always to have dimensions xdata [ iinput, ival]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_bootstrapped</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ydata</span><span class="o">.</span><span class="n">flatten</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span><span class="n">BootStrap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="SetOfFitFuns.Get_Extrapolation"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Get_Extrapolation">[docs]</a>    <span class="k">def</span> <span class="nf">Get_Extrapolation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">with_chi</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ff</span><span class="o">.</span><span class="n">PullFitSeries</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">],</span><span class="n">with_chi</span><span class="o">=</span><span class="n">with_chi</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ff</span><span class="o">.</span><span class="n">PullFitSeries</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">],</span><span class="n">with_chi</span><span class="o">=</span><span class="n">with_chi</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">with_chi</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(),</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span></div>





    <span class="c1">## acceptable formats for function are:</span>
    <span class="c1">## [&#39;Funs&#39;] = (fun, npar, funder)</span>

    <span class="c1">## [&#39;Funs&#39;] = (fun, npar)</span>
    <span class="c1">## [&#39;FunDer&#39;] = funder</span>
    <span class="c1">## [&#39;FunDer&#39;] not initialised</span>

    <span class="c1">## [&#39;Funs&#39;] = (fun, funder)</span>
    <span class="c1">## [&#39;npar&#39;] = npar</span>

    <span class="c1">## [&#39;Funs&#39;] = [fun]</span>
    <span class="c1">## [&#39;npar&#39;] = npar</span>
    <span class="c1">## [&#39;FunDer&#39;] = funder</span>
    <span class="c1">## [&#39;FunDer&#39;] not initialised</span>

    <span class="c1">## [&#39;Funs&#39;] = fun</span>
    <span class="c1">## [&#39;npar&#39;] = npar</span>
    <span class="c1">## [&#39;FunDer&#39;] = funder</span>
    <span class="c1">## [&#39;FunDer&#39;] not initialised</span>

<div class="viewcode-block" id="SetOfFitFuns.AddDefault"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.AddDefault">[docs]</a>    <span class="k">def</span> <span class="nf">AddDefault</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;Funs&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;FunDer&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="nb">int</span><span class="p">):</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="p">[</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;FunDer&#39;</span><span class="p">]]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="nb">int</span><span class="p">):</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;npar&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;npar&#39;</span><span class="p">],</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;npar is needed for fit functions&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;npar&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="s1">&#39;FunDer&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">],</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;npar&#39;</span><span class="p">],</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;FunDer&#39;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">],</span><span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;npar&#39;</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;npar is needed for fit funs&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;FunDer&#39;</span> <span class="ow">in</span> <span class="n">this_dict</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;FunDer&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;iGuess&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;name&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="s1">&#39;paramlist&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;paramlist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;PreDef&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;paramunits&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;paramunits&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;fit_max_1&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># print &#39;Warning, default fit_max_1 not present, using end point&#39;</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;fit_min_1&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># print &#39;Warning, default fit_min_1 not present, using start point&#39;</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;fit_max_2&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># print &#39;Warning, default fit_max_2 not present, using end point&#39;</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;fit_min_2&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># print &#39;Warning, default fit_min_2 not present, using start point&#39;</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;fit_max&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># print &#39;Warning, default fit_max not present, using end point&#39;</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;fit_min&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># print &#39;Warning, default fit_min not present, using start point&#39;</span>
                <span class="n">this_dict</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">this_dict</span></div>

    <span class="c1">## Also Appends</span>
<div class="viewcode-block" id="SetOfFitFuns.ImportFits"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ImportFits">[docs]</a>    <span class="k">def</span> <span class="nf">ImportFits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_types</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;pease import data before import fit information&#39;</span><span class="p">)</span>
        <span class="n">fit_list</span><span class="p">,</span><span class="n">ilist</span> <span class="o">=</span> <span class="p">[],[]</span>
        <span class="c1"># print &#39;DEBUG&#39;</span>
        <span class="c1"># print self.xdata</span>
        <span class="c1"># print self.ydata</span>
        <span class="c1"># print pa.Series(fit_types)</span>
        <span class="c1"># print</span>
        <span class="k">if</span> <span class="n">MaxFitCutoff</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">MaxFitCutoff</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_types</span><span class="p">):</span>
            <span class="n">fit_types</span> <span class="o">=</span> <span class="n">fit_types</span><span class="p">[::(</span><span class="nb">len</span><span class="p">(</span><span class="n">fit_types</span><span class="p">)</span><span class="o">//</span><span class="n">MaxFitCutoff</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Max number of fits was hit for import fits, cutting to &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fit_types</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; fits&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ifit</span> <span class="ow">in</span> <span class="n">fit_types</span><span class="p">:</span>
            <span class="c1"># print &#39;DEBUG&#39;</span>
            <span class="c1"># print ifit[&#39;fit_min_1&#39;]</span>
            <span class="c1"># print ifit[&#39;fit_max_1&#39;]</span>
            <span class="c1"># print ifit[&#39;fit_min_2&#39;]</span>
            <span class="c1"># print ifit[&#39;fit_max_2&#39;]</span>
            <span class="n">ifit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">ifit</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]),</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]))</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[:,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]:</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span><span class="p">[</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]:</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;fit_min_1&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">ifit</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]))</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[:,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]:</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span><span class="p">[</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]:</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]:</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="c1">## TODO This is not working, to fix!!</span>
                    <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]),</span><span class="s1">&#39;shape1&#39;</span><span class="p">)</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="k">while</span> <span class="n">this_key</span> <span class="ow">in</span> <span class="n">ilist</span><span class="p">:</span>
                        <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]),</span>
                                    <span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]),</span><span class="s1">&#39;shape&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">counter</span><span class="p">))</span>
                        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">this_xdata</span><span class="p">,</span><span class="n">this_ydata</span> <span class="o">=</span> <span class="p">[],[]</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">ic1</span><span class="p">,</span><span class="n">ix1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                        <span class="k">if</span> <span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">ic1</span> <span class="o">&lt;=</span> <span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">ic2</span><span class="p">,</span><span class="n">ix2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                                <span class="k">if</span> <span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">][</span><span class="n">counter</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">ic2</span> <span class="o">&lt;=</span> <span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">][</span><span class="n">counter</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                                    <span class="n">this_xdata</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">ix1</span><span class="p">,</span><span class="n">ix2</span><span class="p">])</span>
                                    <span class="n">this_ydata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ydata</span><span class="p">[</span><span class="n">ic1</span><span class="p">,</span><span class="n">ic2</span><span class="p">])</span>
                                <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                        <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;Fit data not found in fitting...&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]))</span>
                    <span class="n">this_xdata</span><span class="p">,</span><span class="n">this_ydata</span> <span class="o">=</span> <span class="p">[],[]</span>
                    <span class="c1"># print(&#39;DEBUG&#39;)</span>
                    <span class="c1"># print(&#39;fit_1 &#39;,self.xdata_split[0][ifit[&#39;fit_min_1&#39;]],&#39; &#39;,self.xdata_split[0][ifit[&#39;fit_max_1&#39;]])</span>
                    <span class="c1"># print(&#39;fit_2 &#39;,self.xdata_split[1][ifit[&#39;fit_min_2&#39;]],&#39; &#39;,self.xdata_split[1][ifit[&#39;fit_max_2&#39;]])</span>
                    <span class="k">for</span> <span class="n">ic</span><span class="p">,(</span><span class="n">ix1</span><span class="p">,</span><span class="n">ix2</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">)):</span>
                        <span class="n">testbool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="n">ix1</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]]</span>
                        <span class="n">testbool</span> <span class="o">=</span> <span class="n">testbool</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="n">ix2</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]]</span>
                        <span class="k">if</span> <span class="n">testbool</span><span class="p">:</span>
                            <span class="n">this_xdata</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">ix1</span><span class="p">,</span><span class="n">ix2</span><span class="p">])</span>
                            <span class="n">this_ydata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ydata</span><span class="p">[</span><span class="n">ic</span><span class="p">])</span>
                    <span class="c1"># this_xdata = np.array(this_xdata)</span>
                    <span class="c1"># if Debug_Mode:</span>
                    <span class="c1">#     print &#39;DEBUG&#39;</span>
                    <span class="c1">#     print this_xdata</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                        <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_1_index &#39;</span><span class="p">,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">],</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_2_index &#39;</span><span class="p">,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">],</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_1 &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]],</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_2 &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]],</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xdata_split_0&#39;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xdata_split_1&#39;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
                        <span class="k">for</span> <span class="n">ic</span><span class="p">,(</span><span class="n">ix1</span><span class="p">,</span><span class="n">ix2</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">)):</span>
                            <span class="n">testbool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="n">ix1</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]]</span>
                            <span class="n">testbool</span> <span class="o">=</span> <span class="n">testbool</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="n">ix2</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]]</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">ix1</span><span class="p">,</span><span class="n">ix2</span><span class="p">,</span><span class="n">testbool</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;Fit data not found in fitting...&#39;</span><span class="p">)</span>

            <span class="n">this_fit</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">Fitting</span><span class="p">(</span> <span class="n">thisPrec</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">thisPrec</span><span class="p">,</span><span class="n">thisMI</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">thisMI</span><span class="p">,</span>
                                <span class="n">Funs</span><span class="o">=</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">],</span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">],</span>
                                <span class="n">iGuess</span><span class="o">=</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">],</span><span class="n">name</span><span class="o">=</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">paramlist</span><span class="o">=</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;paramlist&#39;</span><span class="p">],</span>
                                <span class="n">paramunits</span><span class="o">=</span><span class="n">ifit</span><span class="p">[</span><span class="s1">&#39;paramunits&#39;</span><span class="p">])</span>
            <span class="n">fit_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span>
            <span class="n">ilist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_key</span><span class="p">)</span>
            <span class="c1"># print(&#39;DEBUG ndim&#39;+str(self.ndim_fit),&#39; fitr&#39;,ifit)</span>
            <span class="c1"># for ikey,ival in ifit.items():</span>
            <span class="c1">#     print(&#39;  &#39;,ikey,ival)</span>
            <span class="c1"># print(&#39;Values:&#39;)</span>
            <span class="c1"># for ix_0,ix_1,iy in zip(this_xdata[0],this_xdata[1],this_ydata):</span>
            <span class="c1">#     print(&#39;  &#39;,ix_0,ix_1,iy.Avg,iy.Std)</span>
            <span class="c1"># print()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ilist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ilist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">this_Fit_Col_Names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Function&#39;</span><span class="p">,</span><span class="s1">&#39;iGuess&#39;</span><span class="p">,</span><span class="s1">&#39;fit_min&#39;</span><span class="p">,</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ilist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">this_Fit_Col_Names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Function&#39;</span><span class="p">,</span><span class="s1">&#39;iGuess&#39;</span><span class="p">,</span><span class="s1">&#39;fit_min&#39;</span><span class="p">,</span><span class="s1">&#39;fit_max&#39;</span><span class="p">,</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ilist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="n">this_Fit_Col_Names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Function&#39;</span><span class="p">,</span><span class="s1">&#39;iGuess&#39;</span><span class="p">,</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">,</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">,</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">,</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Fit_Col_Names&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_Fit_Col_Names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING:, different shapes of fit has been calculated, ignoring result&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span> <span class="o">=</span> <span class="n">this_Fit_Col_Names</span>
                <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">ilist</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                    <span class="n">this_df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
                    <span class="n">this_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">fit_list</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_df</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">fit_list</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_str</span> <span class="o">=</span> <span class="s1">&#39;ERROR, no fit ranges were found for fit types </span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">fit_types</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="n">out_str</span><span class="p">)</span></div>



<div class="viewcode-block" id="SetOfFitFuns.DoFits"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.DoFits">[docs]</a>    <span class="k">def</span> <span class="nf">DoFits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">PullParams</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">PullChi</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">show_timer</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">show_timer</span><span class="p">:</span> <span class="n">this_timer</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">linklist</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">))),</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Fitting &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ifit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">successfull</span> <span class="o">=</span> <span class="n">ifit</span><span class="o">.</span><span class="n">FitBoots</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">successfull</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">show_timer</span><span class="p">:</span> <span class="n">this_timer</span><span class="o">.</span><span class="n">Lap</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">show_timer</span><span class="p">:</span> <span class="n">this_timer</span><span class="o">.</span><span class="n">Lap</span><span class="p">(</span><span class="n">ikey</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;Alread Computed&#39;</span><span class="p">,))</span>
            <span class="k">if</span> <span class="n">PullParams</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">PullIdenticalParams</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">PullChi</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">PullChi</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MakeFormatted</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fit not in Fit_Stats&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>
        <span class="c1"># else:</span>
            <span class="c1"># raise EnvironmentError(&#39;Please import data and fits before running DoFits&#39;)</span>

<div class="viewcode-block" id="SetOfFitFuns.UnExpParams"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.UnExpParams">[docs]</a>    <span class="k">def</span> <span class="nf">UnExpParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">paramkeys</span><span class="o">=</span><span class="s1">&#39;All&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">UnExpParams</span><span class="p">(</span><span class="n">paramkeys</span><span class="o">=</span><span class="n">paramkeys</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">UnExpParams</span><span class="p">(</span><span class="n">paramkeys</span><span class="o">=</span><span class="n">paramkeys</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ImportFunction"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ImportFunction">[docs]</a>    <span class="k">def</span> <span class="nf">ImportFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Function</span><span class="p">,</span><span class="n">thisparlen</span><span class="p">,</span><span class="n">FunDer</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="n">thisparlab</span> <span class="o">=</span> <span class="s1">&#39;PreDef&#39;</span><span class="p">,</span><span class="n">thisparunits</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">):</span>
        <span class="n">vall</span><span class="p">,</span><span class="n">indexl</span><span class="p">,</span><span class="n">vall_fmt</span><span class="p">,</span><span class="n">indexl_fmt</span> <span class="o">=</span> <span class="p">[],[],[],[]</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">ImportFunction</span><span class="p">(</span><span class="n">Function</span><span class="p">,</span><span class="n">thisparlen</span><span class="p">,</span><span class="n">FunDer</span><span class="o">=</span><span class="n">FunDer</span><span class="p">,</span><span class="n">thisparlab</span> <span class="o">=</span> <span class="n">thisparlab</span><span class="p">,</span><span class="n">thisparunits</span><span class="o">=</span><span class="n">thisparunits</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">new_key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                <span class="n">new_key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Function</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="n">vall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span>
                <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">new_key</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">indexl</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">vall</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Fit&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">ImportFunction</span><span class="p">(</span><span class="n">Function</span><span class="p">,</span><span class="n">thisparlen</span><span class="p">,</span><span class="n">FunDer</span><span class="o">=</span><span class="n">FunDer</span><span class="p">,</span><span class="n">thisparlab</span> <span class="o">=</span> <span class="n">thisparlab</span><span class="p">,</span><span class="n">thisparunits</span><span class="o">=</span><span class="n">thisparunits</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">ikey_fmt</span><span class="p">,</span><span class="n">ival_fmt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">new_key_fmt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ikey_fmt</span><span class="p">)</span>
                <span class="n">new_key_fmt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Function</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="n">vall_fmt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ival_fmt</span><span class="p">)</span>
                <span class="n">indexl_fmt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">new_key_fmt</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexl_fmt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">indicies_fmt</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">indexl_fmt</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">vall_fmt</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies_fmt</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Fit&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SetOfFitFuns.PullChi"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PullChi">[docs]</a>    <span class="k">def</span> <span class="nf">PullChi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">failed_fit</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">GetChi</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;Chi2DoF&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">fit_data</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">BootStrap</span><span class="p">(</span><span class="n">bootvals</span><span class="o">=</span><span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">)]</span><span class="o">*</span><span class="n">nboot</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">GetChi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdfStd&#39;</span><span class="p">]</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">GetChi</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdfStd&#39;</span><span class="p">]</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">failed_fit</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;Error fitting, something went wrong when fitting&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, called PullChi before DoFits, running fits now&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DoFits</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PullChi</span><span class="p">(</span><span class="n">failed_fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.MakeFitRanges_shape"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.MakeFitRanges_shape">[docs]</a>    <span class="k">def</span> <span class="nf">MakeFitRanges_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">npar</span><span class="p">):</span>
        <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">out_2_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min_1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ifit_max_1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ifit_min_1</span><span class="o">+</span><span class="n">npar</span><span class="p">,</span><span class="n">fit_max_1</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">ifit</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span><span class="p">):</span>
                    <span class="n">out_2_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min_2</span><span class="p">[</span><span class="n">ifit</span><span class="p">],</span><span class="n">fit_min_2</span><span class="p">[</span><span class="n">ifit</span><span class="p">],</span><span class="n">npar</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out_list</span><span class="p">,</span><span class="n">out_2_list</span></div>

<div class="viewcode-block" id="SetOfFitFuns.GetXdataValue"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetXdataValue">[docs]</a>    <span class="k">def</span> <span class="nf">GetXdataValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata_split&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sort_xvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sort_xvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">get_val_float</span><span class="p">(</span><span class="n">fit_min</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sort_xvals</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_min &#39;</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="s1">&#39; not in xdata, finding closest values above&#39;</span><span class="p">)</span>
            <span class="n">fit_min</span> <span class="o">=</span> <span class="n">sort_xvals</span><span class="p">[</span><span class="n">sort_xvals</span> <span class="o">&gt;</span> <span class="n">fit_min</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_min</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">out_str</span> <span class="o">=</span> <span class="s1">&#39;fit_min is larger than all data for index:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;fit_min &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_min</span><span class="p">)</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;xdata: </span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">sort_xvals</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="n">out_str</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fit_min</span> <span class="o">=</span> <span class="n">fit_min</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">get_val_float</span><span class="p">(</span><span class="n">fit_max</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sort_xvals</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_max &#39;</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="s1">&#39; not in xdata, finding closest values below&#39;</span><span class="p">)</span>
            <span class="n">fit_max</span> <span class="o">=</span> <span class="n">sort_xvals</span><span class="p">[</span><span class="n">sort_xvals</span> <span class="o">&lt;</span> <span class="n">fit_max</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_max</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">out_str</span> <span class="o">=</span> <span class="s1">&#39;fit_max is smaller than all data for index:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;fit_max &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_max</span><span class="p">)</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;xdata: </span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">sort_xvals</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="n">out_str</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fit_max</span> <span class="o">=</span> <span class="n">fit_max</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span></div>


<div class="viewcode-block" id="SetOfFitFuns.MakeFitRanges"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.MakeFitRanges">[docs]</a>    <span class="k">def</span> <span class="nf">MakeFitRanges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">npar</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">from_xdata</span><span class="p">:</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetXdataValue</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata_split&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">fit_min</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_x</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">get_val_float</span><span class="p">(</span><span class="n">fit_min</span><span class="p">))</span>
            <span class="n">fit_max</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_x</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">get_val_float</span><span class="p">(</span><span class="n">fit_max</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">fit_min</span> <span class="o">==</span> <span class="n">fit_max</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fit_max</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">fit_max</span> <span class="o">=</span> <span class="n">fit_max</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">fit_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">fit_min</span><span class="o">-</span><span class="n">npar</span><span class="p">)</span>
        <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ifit_max</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ifit_min</span><span class="o">+</span><span class="n">npar</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">fit_max</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out_list</span></div>

<div class="viewcode-block" id="SetOfFitFuns.MakeFitRanges_FixEnd"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.MakeFitRanges_FixEnd">[docs]</a>    <span class="k">def</span> <span class="nf">MakeFitRanges_FixEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">npar</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">from_xdata</span><span class="p">:</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetXdataValue</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata_split&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">fit_min_i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_x</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">get_val_float</span><span class="p">(</span><span class="n">fit_min</span><span class="p">))</span>
            <span class="n">fit_max_i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_x</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">get_val_float</span><span class="p">(</span><span class="n">fit_max</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">fit_min</span> <span class="o">==</span> <span class="n">fit_max</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fit_max</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">fit_max</span> <span class="o">=</span> <span class="n">fit_max</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">fit_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">fit_min</span><span class="o">-</span><span class="n">npar</span><span class="p">)</span>
            <span class="c1"># print(&#39;DEBUG fit_min_i&#39;,fit_min_i)</span>
            <span class="c1"># print(&#39;DEBUG fit_max_i&#39;,fit_max_i)</span>
        <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fit_min_i</span><span class="p">,</span><span class="n">fit_max_i</span><span class="o">-</span><span class="n">npar</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">fit_max_i</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out_list</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span></div>

<div class="viewcode-block" id="SetOfFitFuns.MakeFitRanges_Sym"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.MakeFitRanges_Sym">[docs]</a>    <span class="k">def</span> <span class="nf">MakeFitRanges_Sym</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">npar</span><span class="p">):</span>
        <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fit_max</span><span class="o">-</span><span class="n">fit_min</span><span class="o">-</span><span class="n">npar</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">icut</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">((</span><span class="n">fit_max</span><span class="o">-</span><span class="n">fit_min</span><span class="o">-</span><span class="n">npar</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">fit_min</span><span class="o">+</span><span class="n">icut</span><span class="p">,</span><span class="n">fit_max</span><span class="o">-</span><span class="n">icut</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out_list</span></div>

<div class="viewcode-block" id="SetOfFitFuns.CheckRange_fitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.CheckRange_fitr">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRange_fitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_fit</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="n">unxmlfitr_int</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">this_fit</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;incorrect format for fitr#-# : &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">CheckRange</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">fit_info</span><span class="p">,</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.CheckRange"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.CheckRange">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CheckRange must be used for 1d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">CheckRange</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges to check for:&#39;</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]))</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="n">this_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;iGuess&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit_min</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit_max</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">this_tuple</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">this_tuple</span><span class="p">,</span> <span class="s1">&#39;not fitted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="SetOfFitFuns.ScanRange_fitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanRange_fitr">[docs]</a>    <span class="k">def</span> <span class="nf">ScanRange_fitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_fit</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="n">unxmlfitr_int</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">this_fit</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;incorrect format for fitr#-# : &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScanRange</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">fit_info</span><span class="p">,</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ScanRange_fitr_Sym"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanRange_fitr_Sym">[docs]</a>    <span class="k">def</span> <span class="nf">ScanRange_fitr_Sym</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_fit</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="n">unxmlfitr_int</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">this_fit</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;incorrect format for fitr#-# : &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScanRange_Sym</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">fit_info</span><span class="p">,</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span></div>


    <span class="c1">## min_fit_len is added into npar, i.e. only accepts fit ranges past npar+min_fit_len</span>
    <span class="c1">## zero is npar.</span>
<div class="viewcode-block" id="SetOfFitFuns.ScanRange"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanRange">[docs]</a>    <span class="k">def</span> <span class="nf">ScanRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanRange must be used for 1d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanRange</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for:&#39;</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max</span>
            <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

            <span class="c1">## min_fit_len is added into npar, i.e. only accepts fit ranges past npar+min_fit_len</span>
    <span class="c1">## zero is npar.</span>
<div class="viewcode-block" id="SetOfFitFuns.ScanRange_Sym"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanRange_Sym">[docs]</a>    <span class="k">def</span> <span class="nf">ScanRange_Sym</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanRange must be used for 1d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanRange_Sym</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges_Sym</span><span class="p">(</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for:&#39;</span><span class="p">,</span><span class="n">fit_min</span><span class="p">,</span><span class="n">fit_max</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max</span>
            <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="SetOfFitFuns.ScanShape"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanShape">[docs]</a>    <span class="k">def</span> <span class="nf">ScanShape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanShape must be used for 2d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanShape</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span><span class="p">,</span><span class="n">fit_ranges_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges_shape</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for shape:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span> <span class="ow">in</span> <span class="n">fit_ranges_2</span><span class="p">:</span>
                <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_1</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_1</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_2</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_2</span>
                <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ScanBox_fitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanBox_fitr">[docs]</a>    <span class="k">def</span> <span class="nf">ScanBox_fitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_1</span><span class="p">,</span><span class="n">fit_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_1</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span> <span class="o">=</span> <span class="n">unxmlfitr_int</span><span class="p">(</span><span class="n">fit_1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_1</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">fit_1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;incorrect format for fitr#-# : &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_1</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_2</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span> <span class="o">=</span> <span class="n">unxmlfitr_int</span><span class="p">(</span><span class="n">fit_2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_2</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">fit_2</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;incorrect format for fittwor#-# : &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_2</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScanBox</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">fit_info</span><span class="p">,</span>
                            <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">min_fit_len_2</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ScanBox"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanBox">[docs]</a>    <span class="k">def</span> <span class="nf">ScanBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanBox must be used for 2d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanBox</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fit_ranges_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges_2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min fit ranges&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_2</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span> <span class="ow">in</span> <span class="n">fit_ranges_2</span><span class="p">:</span>
                <span class="c1"># print(&#39;Adding fitr&#39;+str(ifit_min_1)+&#39;-&#39;+str(ifit_max_1)+&#39; fittwor&#39;+str(ifit_min_2)+&#39;-&#39;+str(ifit_max_2))</span>
                <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_1</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_1</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_2</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_2</span>
                <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ScanBox_maxdim2"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanBox_maxdim2">[docs]</a>    <span class="k">def</span> <span class="nf">ScanBox_maxdim2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanBox must be used for 2d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanBox_maxdim2</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fit_ranges_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges</span><span class="p">(</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges_2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min fit ranges&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_2</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="c1"># for ifit_min_2,ifit_max_2 in fit_ranges_2:</span>
                <span class="c1"># print(&#39;Adding fitr&#39;+str(ifit_min_1)+&#39;-&#39;+str(ifit_max_1)+&#39; fittwor&#39;+str(ifit_min_2)+&#39;-&#39;+str(ifit_max_2))</span>
            <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_1</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_1</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fit_ranges_2</span><span class="p">)[:,</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fit_ranges_2</span><span class="p">)[:,</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="SetOfFitFuns.ScanBox_FixEnd"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanBox_FixEnd">[docs]</a>    <span class="k">def</span> <span class="nf">ScanBox_FixEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanBox must be used for 2d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanBox_FixEnd</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges_FixEnd</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fit_ranges_2</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges_FixEnd</span><span class="p">(</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges_2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min fit ranges&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_2</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xdata dim1&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xdata dim2&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span> <span class="ow">in</span> <span class="n">fit_ranges_2</span><span class="p">:</span>
                <span class="c1"># print(&#39;Adding fitr&#39;+str(ifit_min_1)+&#39;-&#39;+str(ifit_max_1)+&#39; fittwor&#39;+str(ifit_min_2)+&#39;-&#39;+str(ifit_max_2))</span>
                <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_1</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_1</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_2</span>
                <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_2</span>
                <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ScanBox_FixEnd_maxdim2"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ScanBox_FixEnd_maxdim2">[docs]</a>    <span class="k">def</span> <span class="nf">ScanBox_FixEnd_maxdim2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanBox must be used for 2d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ScanBox_FixEnd_maxdim2</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len_1</span><span class="o">=</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">this_npar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddDefault</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)[</span><span class="s1">&#39;Funs&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fit_ranges</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges_FixEnd</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fit_ranges_2</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MakeFitRanges_FixEnd</span><span class="p">(</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="p">,</span><span class="n">from_xdata</span><span class="o">=</span><span class="n">from_xdata</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">fit_ranges_2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, no acceptable fit ranges for:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min fit ranges&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_1</span><span class="p">,</span><span class="n">this_npar</span><span class="o">+</span><span class="n">min_fit_len_2</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xdata dim1&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xdata dim2&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifit_min_1</span><span class="p">,</span><span class="n">ifit_max_1</span> <span class="ow">in</span> <span class="n">fit_ranges</span><span class="p">:</span>
            <span class="c1"># for ifit_min_2,ifit_max_2 in fit_ranges_2:</span>
                <span class="c1"># print(&#39;Adding fitr&#39;+str(ifit_min_1)+&#39;-&#39;+str(ifit_max_1)+&#39; fittwor&#39;+str(ifit_min_2)+&#39;-&#39;+str(ifit_max_2))</span>
            <span class="n">this_info</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_min_1</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ifit_max_1</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_ranges_2</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_ranges_2</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SetOfFitFuns.SingleFitBox"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.SingleFitBox">[docs]</a>    <span class="k">def</span> <span class="nf">SingleFitBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="p">{},</span><span class="n">min_fit_len</span><span class="o">=</span><span class="n">def_min_fitr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ScanBox must be used for 2d fitting&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fit_info</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">SingleFitBox</span><span class="p">(</span><span class="n">fit_min_1</span><span class="p">,</span><span class="n">fit_max_1</span><span class="p">,</span><span class="n">fit_min_2</span><span class="p">,</span><span class="n">fit_max_2</span><span class="p">,</span><span class="n">fit_info</span><span class="o">=</span><span class="n">iinfo</span><span class="p">,</span>
                <span class="n">min_fit_len</span><span class="o">=</span><span class="n">min_fit_len</span><span class="p">)</span> <span class="k">for</span> <span class="n">iinfo</span> <span class="ow">in</span> <span class="n">fit_info</span><span class="p">])</span>
        <span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;fit_min_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_min_1</span>
        <span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;fit_max_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_max_1</span>
        <span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;fit_min_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_min_2</span>
        <span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;fit_max_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_max_2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">fit_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SetOfFitFuns.SortChi"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.SortChi">[docs]</a>    <span class="k">def</span> <span class="nf">SortChi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ChiSorted</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Chi2pdf&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PullChi</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;Chi2pdf&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">PullChi</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ChiSorted_fmt</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ChiSorted</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SetOfFitFuns.PlotVaryFitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PlotVaryFitr">[docs]</a>    <span class="k">def</span> <span class="nf">PlotVaryFitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot_plane</span><span class="p">,</span><span class="n">acutal_x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                     <span class="n">thiscol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">thissym</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">thisshift</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">all_data</span><span class="p">,</span><span class="n">cut_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get_Extrapolation</span><span class="p">(</span><span class="n">fmted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">with_chi</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;plotfitvary has no data to extrapolate&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">plot_plane</span>
        <span class="n">all_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">cut_data</span> <span class="o">=</span> <span class="n">cut_data</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;chi_data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">cut_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">((</span><span class="n">cut_data</span><span class="p">[</span><span class="s1">&#39;chi_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chi_min</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
                                <span class="p">(</span><span class="n">cut_data</span><span class="p">[</span><span class="s1">&#39;chi_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chi_max</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">),:]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cut_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING, no chi ranges&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;chi_min:&#39;</span><span class="p">,</span><span class="n">chi_min</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;chi_min:&#39;</span><span class="p">,</span><span class="n">chi_min</span><span class="p">)</span>
            <span class="c1"># print(&#39;ramge of chi values are are&#39;)</span>
            <span class="c1"># print(&#39;min_chi:&#39;,min(cut_data[&#39;chi_data&#39;].apply(lambda x : x.Avg)))</span>
            <span class="c1"># print(&#39;min_chi:&#39;,max(cut_data[&#39;chi_data&#39;].apply(lambda x : x.Avg)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;using all chi values for this result&#39;</span><span class="p">)</span>
            <span class="n">cut_data</span> <span class="o">=</span> <span class="n">all_data</span>
        <span class="k">if</span> <span class="n">acutal_x</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata_split&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pull_x</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{self.xdata[0][int(x)]:.4f}</span><span class="s1">&#39;</span>
                <span class="n">cut_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cut_data</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pull_x</span><span class="p">)</span>
                <span class="n">cut_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cut_data</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pull_x</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">ifit</span><span class="p">,</span><span class="n">ix</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span><span class="p">):</span>
                    <span class="n">pull_x</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{ix[int(x)]:.4f}</span><span class="s1">&#39;</span>
                    <span class="n">cut_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;fit_min_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">cut_data</span><span class="p">[</span><span class="s1">&#39;fit_min_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pull_x</span><span class="p">)</span>
                    <span class="n">cut_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;fit_max_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">cut_data</span><span class="p">[</span><span class="s1">&#39;fit_max_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ifit</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pull_x</span><span class="p">)</span>
                <span class="c1"># warn(&#39;acutal x values for 2d plotting not implemented yet, not using actual x&#39;)</span>
                <span class="c1"># raise NotImplementedError(&#39;acutal x values for 2d plotting not implemented yet.&#39;)</span>
        <span class="n">this_index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cut_data</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">this_index</span><span class="p">[</span><span class="n">this_index</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)]</span>
        <span class="c1"># del this_index[this_index.index(&#39;Function&#39;)]</span>
        <span class="c1"># del this_index[this_index.index(&#39;iGuess&#39;)]</span>
        <span class="n">cut_data</span> <span class="o">=</span> <span class="n">cut_data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">this_index</span><span class="p">)[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
        <span class="n">hold_series</span> <span class="o">=</span> <span class="n">null_series</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thissym</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thiscol</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thisshift</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar_vary&#39;</span>
        <span class="n">first_key</span> <span class="o">=</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),)</span><span class="o">+</span><span class="nb">tuple</span><span class="p">(</span><span class="n">cut_data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_key</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;from_keys&#39;</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cut_data</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cut_data</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">plot_plane</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">hold_series</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">plot_plane</span></div>

    <span class="c1">## TODO ###</span>
    <span class="c1"># def PlotChiVaryFitr(self,plot_plane,chi_min=0,chi_max=2):</span>
    <span class="c1">#     all_data,chi_data = self.Get_Extrapolation(fmted=False,with_chi=True)</span>
    <span class="c1">#     chi_data = chi_data.to_frame(&#39;chi_data&#39;).reset_index()</span>
    <span class="c1">#     all_data = deepcopy(chi_data)</span>
    <span class="c1">#     chi_data = chi_data.loc[np.logical_and((chi_data[&#39;chi_data&#39;].apply(lambda x : x.Avg) &gt;= int(chi_min)).values,</span>
    <span class="c1">#                             (chi_data[&#39;chi_data&#39;].apply(lambda x : x.Avg) &lt;= int(chi_max)).values),:]</span>
    <span class="c1">#     if len(chi_data) == 0:</span>
    <span class="c1">#         print(&#39;WARNING, no chi ranges&#39;)</span>
    <span class="c1">#         print(&#39;chi_min:&#39;,chi_min)</span>
    <span class="c1">#         print(&#39;chi_min:&#39;,chi_min)</span>
    <span class="c1">#         # print(&#39;ramge of chi values are are&#39;)</span>
    <span class="c1">#         # print(&#39;min_chi:&#39;,min(chi_data[&#39;chi_data&#39;].apply(lambda x : x.Avg)))</span>
    <span class="c1">#         # print(&#39;min_chi:&#39;,max(chi_data[&#39;chi_data&#39;].apply(lambda x : x.Avg)))</span>
    <span class="c1">#         print(&#39;using all chi values for this result&#39;)</span>
    <span class="c1">#         chi_data = all_data</span>

<div class="viewcode-block" id="SetOfFitFuns.PlotFunction"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PlotFunction">[docs]</a>    <span class="k">def</span> <span class="nf">PlotFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ikey</span><span class="p">,</span><span class="n">otherXvals</span><span class="o">=</span><span class="p">[],</span><span class="n">xaxis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xdatarange</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span><span class="n">thislineres</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">shift</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">flowphys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ShowPar</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                    <span class="n">plot_plane</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">hairline</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="n">fit_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">ikey</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ikey</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ikey</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING: &#39;</span><span class="p">,</span><span class="n">ikey</span><span class="p">,</span><span class="s1">&#39;not found in Fit_Stats(_fmt), skipping plot&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fit_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ikey</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fit_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ikey</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
        <span class="n">plot_plane</span> <span class="o">=</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">PlotFunction</span><span class="p">(</span><span class="n">otherXvals</span><span class="o">=</span><span class="n">otherXvals</span><span class="p">,</span><span class="n">xaxis</span><span class="o">=</span><span class="n">xaxis</span><span class="p">,</span>
                    <span class="n">xdatarange</span><span class="o">=</span><span class="n">xdatarange</span><span class="p">,</span><span class="n">thislineres</span><span class="o">=</span><span class="n">thislineres</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span><span class="n">shift</span><span class="o">=</span><span class="n">shift</span><span class="p">,</span><span class="n">flowphys</span><span class="o">=</span><span class="n">flowphys</span><span class="p">,</span><span class="n">ShowPar</span><span class="o">=</span><span class="n">ShowPar</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                    <span class="n">plot_plane</span><span class="o">=</span><span class="n">plot_plane</span><span class="p">,</span><span class="n">hairline</span><span class="o">=</span><span class="n">hairline</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">plot_plane</span></div>


    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Generic function for varying one thing, and keeping the rest FixRead</span>
<span class="sd">    this_list is what you are varying, flag is its index</span>
<span class="sd">    and fit_info is everything else</span>


<span class="sd">    &#39;&#39;&#39;</span>
<div class="viewcode-block" id="SetOfFitFuns.ImportVarySomething"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ImportVarySomething">[docs]</a>    <span class="k">def</span> <span class="nf">ImportVarySomething</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_list</span><span class="p">,</span><span class="n">fit_info</span><span class="p">,</span><span class="n">flag</span><span class="p">):</span>
        <span class="n">parse_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_list</span><span class="p">:</span>
            <span class="n">this_info</span> <span class="o">=</span> <span class="n">fit_info</span>
            <span class="n">this_info</span><span class="p">[</span><span class="n">flag</span><span class="p">]</span> <span class="o">=</span> <span class="n">ival</span>
            <span class="n">parse_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_info</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;Fun&#39;</span> <span class="ow">in</span> <span class="n">flag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">VaryFunctions</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportFits</span><span class="p">(</span><span class="n">parse_info</span><span class="p">)</span></div>

    <span class="c1"># def PullAllParams(self):</span>
    <span class="c1">#     if &#39;Fit&#39; in self.Fit_Stats:</span>
    <span class="c1">#         vall,avgl,stdl = [],[],[]</span>
    <span class="c1">#         for ifit,fit_data in self.Fit_Stats.loc[:,&#39;Fit&#39;].iteritems():</span>
    <span class="c1">#             vall.append([])</span>
    <span class="c1">#             avgl.append([])</span>
    <span class="c1">#             stdl.append([])</span>
    <span class="c1">#             for ipar in list(fit_data.fit_data.loc[:,&#39;Params&#39;].index):</span>
    <span class="c1">#                 if isinstance(ipar,int):</span>
    <span class="c1">#                     ipar = fit_data.fit_data.loc[:,&#39;Params&#39;].index[ipar]</span>
    <span class="c1">#                 # self.Fit_Stats.loc[ifit,&#39;par_&#39;+ipar] = fit_data.fit_data.apply(debug_fun)</span>
    <span class="c1">#                 this_val = fit_data.fit_data[&#39;Params&#39;][ipar]</span>
    <span class="c1">#                 vall[-1].append(this_val)</span>
    <span class="c1">#</span>
    <span class="c1">#                 self.Fit_Stats[&#39;par_&#39;+ipar][ifit] =</span>
    <span class="c1">#                 self.Fit_Stats[&#39;par_&#39;+ipar+&#39;_Avg&#39;][ifit] = self.Fit_Stats[&#39;par_&#39;+ipar][ifit].Avg</span>
    <span class="c1">#                 self.Fit_Stats[&#39;par_&#39;+ipar+&#39;_Std&#39;][ifit] = self.Fit_Stats[&#39;par_&#39;+ipar][ifit].Std</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         print &#39;Warning, called PullParam before DoFits, running fits now&#39;</span>
    <span class="c1">#         self.DoFits()</span>
    <span class="c1">#         self.PullAllParam()</span>

    <span class="c1"># def Flip_X_Axis(self):</span>
    <span class="c1">#     if self.Fit_Stats is not None and &#39;Fit&#39; in self.Fit_Stats.columns:</span>
    <span class="c1">#         self.Fit_Stats.loc[:,&#39;Fit&#39;] = self.Fit_Stats.loc[:,&#39;Fit&#39;].apply(lambda x : x.Flip_X_Axis())</span>
    <span class="c1">#     if self.Fit_Stats_fmt is not None and &#39;Fit&#39; in self.Fit_Stats_fmt.columns:</span>
    <span class="c1">#         self.Fit_Stats_fmt.loc[:,&#39;Fit&#39;] = self.Fit_Stats_fmt.loc[:,&#39;Fit&#39;].apply(lambda x : x.Flip_X_Axis())</span>
    <span class="c1">#</span>
    <span class="c1"># def Flip_Y_Axis(self):</span>
    <span class="c1">#     if self.Fit_Stats is not None and &#39;Fit&#39; in self.Fit_Stats.columns:</span>
    <span class="c1">#         self.Fit_Stats.loc[:,&#39;Fit&#39;] = self.Fit_Stats.loc[:,&#39;Fit&#39;].apply(lambda x : x.Flip_Y_Axis())</span>
    <span class="c1">#     if self.Fit_Stats_fmt is not None and &#39;Fit&#39; in self.Fit_Stats_fmt.columns:</span>
    <span class="c1">#         self.Fit_Stats_fmt.loc[:,&#39;Fit&#39;] = self.Fit_Stats_fmt.loc[:,&#39;Fit&#39;].apply(lambda x : x.Flip_Y_Axis())</span>

<div class="viewcode-block" id="SetOfFitFuns.GetFuns"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetFuns">[docs]</a>    <span class="k">def</span> <span class="nf">GetFuns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">())</span></div>

<div class="viewcode-block" id="SetOfFitFuns.RemoveFuns"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.RemoveFuns">[docs]</a>    <span class="k">def</span> <span class="nf">RemoveFuns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">RemoveFuns</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">RemoveFuns</span><span class="p">())</span></div>


<div class="viewcode-block" id="SetOfFitFuns.GetBestChi"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetBestChi">[docs]</a>    <span class="k">def</span> <span class="nf">GetBestChi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SortChi</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="SetOfFitFuns.GetBestChi_key"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetBestChi_key">[docs]</a>    <span class="k">def</span> <span class="nf">GetBestChi_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SortChi</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="SetOfFitFuns.ReduceViaChi"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.ReduceViaChi">[docs]</a>    <span class="k">def</span> <span class="nf">ReduceViaChi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">nchi_cutoff</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SortChi</span><span class="p">()</span>
        <span class="n">outputChi</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">chi_min</span><span class="p">]</span>
        <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">chi_max</span><span class="p">]</span>
        <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">chi_min</span><span class="p">]</span>
        <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">chi_max</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">nchi_cutoff</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">nchi_cutoff</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">rand_list</span><span class="p">,:]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">])])</span>
            <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="s1">&#39;All&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">nchi_cutoff</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">nchi_cutoff</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">rand_list</span><span class="p">,:]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">])])</span>
            <span class="n">outputChi</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="s1">&#39;All&#39;</span>
        <span class="k">return</span> <span class="n">outputChi</span><span class="p">,</span><span class="n">rand_list</span></div>


<div class="viewcode-block" id="SetOfFitFuns.GetChiRange"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetChiRange">[docs]</a>    <span class="k">def</span> <span class="nf">GetChiRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">nchi_cutoff</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SortChi</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="n">this_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">this_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span>
        <span class="n">temp_df</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[</span><span class="n">this_fit</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">chi_min</span><span class="p">]</span>
        <span class="n">temp_df</span> <span class="o">=</span> <span class="n">temp_df</span><span class="p">[</span><span class="n">this_fit</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">chi_max</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">nchi_cutoff</span><span class="p">:</span>
            <span class="n">rand_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">temp_df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">nchi_cutoff</span><span class="p">,</span><span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">temp_df</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">rand_list</span><span class="p">,:]</span>
            <span class="k">return</span> <span class="n">temp_df</span><span class="p">,</span><span class="n">rand_list</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">temp_df</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[</span><span class="n">this_fit</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">this_fit</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">])]</span>
            <span class="k">return</span> <span class="n">temp_df</span><span class="p">,</span><span class="nb">min</span><span class="p">(</span><span class="n">this_fit</span><span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">temp_df</span><span class="p">,</span><span class="s1">&#39;All&#39;</span></div>


    <span class="c1"># def GetChiRange_fitr(self,chi_min=0,chi_max=100,nchi_cutoff = 100,fmted=True):</span>
    <span class="c1">#     this_data,rand_list = self.GetChiRange(chi_min=chi_min,chi_max=chi_max,nchi_cutoff = nchi_cutoff,fmted=fmted)</span>
    <span class="c1">#     index_list = list(this_data.index)</span>
    <span class="c1">#     index_list = [ival[:2] + (&#39;fitr&#39;+ival[2]+&#39;-&#39;+ival[3],) for ival in index_list]</span>
    <span class="c1">#     indicies = pa.MultiIndex.from_tuples(index_list,names=this_data.index.names[:2]+[&#39;fit_ranges&#39;])</span>
    <span class="c1">#     output_data = pa.DataFrame(index=indicies)</span>
    <span class="c1">#     for icol,col_data in this_data.iteritems():</span>
    <span class="c1">#         output_data.loc[:,icol] = pa.Series(col_data.values,index=indicies)</span>
    <span class="c1">#     return output_data,rand_list</span>

<div class="viewcode-block" id="SetOfFitFuns.Get_Formatted_Table"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Get_Formatted_Table">[docs]</a>    <span class="k">def</span> <span class="nf">Get_Formatted_Table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fmt_latex</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PullIdenticalParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PullPlotLen</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">to_latex</span><span class="p">(</span><span class="n">escape</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
        <span class="n">par_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;len_val&#39;</span><span class="p">,</span><span class="s1">&#39;fit_min_val&#39;</span><span class="p">,</span><span class="s1">&#39;len&#39;</span><span class="p">,</span><span class="s1">&#39;fit_max_val&#39;</span><span class="p">]</span>
        <span class="n">par_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">icol</span> <span class="k">for</span> <span class="n">icol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;par_&#39;</span> <span class="ow">in</span> <span class="n">icol</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;_Avg&#39;</span> <span class="ow">in</span> <span class="n">icol</span> <span class="ow">or</span> <span class="s1">&#39;_Std&#39;</span> <span class="ow">in</span> <span class="n">icol</span><span class="p">)]</span>
        <span class="n">par_list</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;Chi2pdfAvg&#39;</span><span class="p">,</span><span class="s1">&#39;Chi2pdfStd&#39;</span><span class="p">]</span>
        <span class="n">fmt_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">par_list</span><span class="p">]</span>
        <span class="n">valerr_fit</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">icol</span> <span class="ow">in</span> <span class="n">fmt_fit</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Avg&#39;</span> <span class="ow">in</span> <span class="n">icol</span><span class="p">:</span>
                <span class="n">err_col</span> <span class="o">=</span> <span class="n">icol</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_Avg&#39;</span><span class="p">,</span><span class="s1">&#39;_Std&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Avg&#39;</span><span class="p">,</span><span class="s1">&#39;Std&#39;</span><span class="p">)</span>
                <span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_Avg&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Avg&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">fmt_fit</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">MakeValAndErr</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">icol</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="n">err_col</span><span class="p">],</span><span class="n">latex</span><span class="o">=</span><span class="n">fmt_latex</span><span class="p">,</span><span class="n">Dec</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;Std&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">icol</span><span class="p">:</span>
                <span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span> <span class="o">=</span> <span class="n">fmt_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fmt_latex</span><span class="p">:</span>
            <span class="n">valerr_fit</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="o">+</span><span class="n">icol</span><span class="o">+</span><span class="s1">&#39;$&#39;</span> <span class="k">for</span> <span class="n">icol</span> <span class="ow">in</span> <span class="n">valerr_fit</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">icol</span> <span class="ow">in</span> <span class="n">valerr_fit</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">str</span><span class="p">):</span>
                    <span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span> <span class="o">=</span> <span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="s1">&#39;$&#39;</span><span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39;$&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span> <span class="o">=</span> <span class="n">valerr_fit</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">f</span><span class="s1">&#39;$</span><span class="si">{x:0.3f}</span><span class="s1">$&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">valerr_fit</span></div>

<div class="viewcode-block" id="SetOfFitFuns.PullPlotLen"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PullPlotLen">[docs]</a>    <span class="k">def</span> <span class="nf">PullPlotLen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PullPlotFitr</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata_split&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;len_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;fit_max_val&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;fit_min_val&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;len_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;fit_max_val&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;fit_min_val&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;pull plot len not implemented for 2d fitting yet.&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.PullPlotFitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PullPlotFitr">[docs]</a>    <span class="k">def</span> <span class="nf">PullPlotFitr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;xdata_split&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata_split</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;fit_min_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;fit_max_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;fit_min_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;fit_max_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;pull plot fitr not implemented for 2d fitting yet.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SetOfFitFuns.PullIdenticalParams"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PullIdenticalParams">[docs]</a>    <span class="k">def</span> <span class="nf">PullIdenticalParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">VaryFunctions</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="s1">&#39;Params&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">count</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cannot pull identical parameters, none found&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Debug_Mode</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">,</span><span class="s1">&#39;Params&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">par_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ipar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">par_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PullParam</span><span class="p">(</span><span class="n">ipar</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.PullParam"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.PullParam">[docs]</a>    <span class="k">def</span> <span class="nf">PullParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ipar</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">VaryFunctions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PullParams not implemented for different functions&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">:</span>
            <span class="n">vall</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">ifit</span><span class="p">,</span><span class="n">fit_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="s1">&#39;Params&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                    <span class="n">vall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BootStrap</span><span class="p">(</span><span class="n">bootvals</span><span class="o">=</span><span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">)]</span><span class="o">*</span><span class="n">nboot</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ipar</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
                        <span class="n">ipar</span> <span class="o">=</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">ipar</span><span class="p">]</span>
                    <span class="n">vall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fit_data</span><span class="o">.</span><span class="n">fit_data</span><span class="p">[</span><span class="s1">&#39;Params&#39;</span><span class="p">][</span><span class="n">ipar</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">vall</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="o">+</span><span class="s1">&#39;_Avg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="o">+</span><span class="s1">&#39;_Std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
                <span class="n">vall</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">ifit</span><span class="p">,</span><span class="n">fit_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="s1">&#39;Params&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                        <span class="n">vall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BootStrap</span><span class="p">(</span><span class="n">bootvals</span><span class="o">=</span><span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">)]</span><span class="o">*</span><span class="n">nboot</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ipar</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
                            <span class="n">ipar</span> <span class="o">=</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">ipar</span><span class="p">]</span>
                        <span class="n">vall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fit_data</span><span class="o">.</span><span class="n">fit_data</span><span class="p">[</span><span class="s1">&#39;Params&#39;</span><span class="p">][</span><span class="n">ipar</span><span class="p">])</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">vall</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="o">+</span><span class="s1">&#39;_Avg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="o">+</span><span class="s1">&#39;_Std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;par_&#39;</span><span class="o">+</span><span class="n">ipar</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, called PullParam before DoFits, running fits now&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DoFits</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PullParam</span><span class="p">(</span><span class="n">ipar</span><span class="p">)</span></div>


<div class="viewcode-block" id="SetOfFitFuns.Stats"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Stats">[docs]</a>    <span class="k">def</span> <span class="nf">Stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Stats</span><span class="p">())</span>
        <span class="k">if</span> <span class="s1">&#39;Fit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Stats</span><span class="p">())</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Function"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Function">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Function</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Fun_Avg"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Fun_Avg">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Fun_Avg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Fun_Avg</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Fun_Std"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Fun_Std">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Fun_Std</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Fun_Std</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Fun_AvgStd"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Fun_AvgStd">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Fun_AvgStd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Fun_AvgStd</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>


<div class="viewcode-block" id="SetOfFitFuns.Eval_Function_fmt"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Function_fmt">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Function_fmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Function</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Fun_Avg_fmt"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Fun_Avg_fmt">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Fun_Avg_fmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Fun_Avg</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Fun_Std_fmt"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Fun_Std_fmt">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Fun_Std_fmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Fun_Std</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Eval_Fun_AvgStd_fmt"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Eval_Fun_AvgStd_fmt">[docs]</a>    <span class="k">def</span> <span class="nf">Eval_Fun_AvgStd_fmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">vals</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Eval_Fun_AvgStd</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.FormatIndex"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.FormatIndex">[docs]</a>    <span class="k">def</span> <span class="nf">FormatIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_index</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">this_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; fitr&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">this_index</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">this_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; fitr&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">this_index</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">this_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; fitr&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">this_index</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]))</span><span class="o">+</span> <span class="s1">&#39; fittwor&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">this_index</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]))</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Comb_Max_fitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Comb_Max_fitr">[docs]</a>    <span class="k">def</span> <span class="nf">Comb_Max_fitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fix_max</span><span class="p">,</span><span class="n">cut_min</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">resample</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">all_data</span><span class="p">,</span><span class="n">chi_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get_Extrapolation</span><span class="p">(</span><span class="n">fmted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">with_chi</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">all_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">chi_data</span> <span class="o">=</span> <span class="n">chi_data</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;chi_data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">chi_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">((</span><span class="n">chi_data</span><span class="p">[</span><span class="s1">&#39;chi_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chi_min</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
                                <span class="p">(</span><span class="n">chi_data</span><span class="p">[</span><span class="s1">&#39;chi_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chi_max</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">),:]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">chi_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING, no chi ranges&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;chi_min:&#39;</span><span class="p">,</span><span class="n">chi_min</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;chi_min:&#39;</span><span class="p">,</span><span class="n">chi_min</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ramge of chi values are are&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min_chi:&#39;</span><span class="p">,</span><span class="nb">min</span><span class="p">(</span><span class="n">chi_data</span><span class="p">[</span><span class="s1">&#39;chi_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min_chi:&#39;</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">chi_data</span><span class="p">[</span><span class="s1">&#39;chi_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;using all chi values for this result&#39;</span><span class="p">)</span>
            <span class="n">chi_data</span> <span class="o">=</span> <span class="n">all_data</span>
        <span class="n">this_data</span> <span class="o">=</span> <span class="n">chi_data</span><span class="p">[</span><span class="n">chi_data</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">fix_max</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">cut_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">this_data</span> <span class="o">=</span> <span class="n">this_data</span><span class="p">[</span><span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cut_min</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING, no comb_max_fitr for these parameters&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_max:&#39;</span><span class="p">,</span><span class="n">fix_max</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cut_min:&#39;</span><span class="p">,</span><span class="n">cut_min</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;using all fit ranges values for this result&#39;</span><span class="p">)</span>
            <span class="n">this_data</span> <span class="o">=</span> <span class="n">chi_data</span>
        <span class="n">parvals</span><span class="p">,</span><span class="n">parindex</span> <span class="o">=</span> <span class="p">[],[]</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">this_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;fit parameter&#39;</span><span class="p">):</span>
            <span class="n">parvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CombineBS</span><span class="p">(</span><span class="n">ival</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span><span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ikey</span><span class="p">),</span><span class="n">resample</span><span class="o">=</span><span class="n">resample</span><span class="p">))</span>
            <span class="n">parindex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parindex</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">parvals</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">parindex</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">out_series</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Comb_Min_fitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Comb_Min_fitr">[docs]</a>    <span class="k">def</span> <span class="nf">Comb_Min_fitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fix_min</span><span class="p">,</span><span class="n">cut_max</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">resample</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">all_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get_Extrapolation</span><span class="p">(</span><span class="n">fmted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">all_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">[</span><span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">fix_min</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">cut_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">all_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">[</span><span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cut_max</span><span class="p">)]</span>
        <span class="n">this_data</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">[</span><span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chi_min</span><span class="p">)]</span>
        <span class="n">this_data</span> <span class="o">=</span> <span class="n">this_data</span><span class="p">[</span><span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chi_max</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING, no comb_max_fitr for these parameters&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fit_min:&#39;</span><span class="p">,</span><span class="n">fix_min</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cut_max:&#39;</span><span class="p">,</span><span class="n">cut_max</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min_chi:&#39;</span><span class="p">,</span><span class="n">chi_min</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;max_chi:&#39;</span><span class="p">,</span><span class="n">chi_max</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ramge of chi values are are&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min_chi:&#39;</span><span class="p">,</span><span class="nb">min</span><span class="p">(</span><span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min_chi:&#39;</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">all_data</span><span class="p">[</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;using all chi values for this result&#39;</span><span class="p">)</span>
            <span class="n">this_data</span> <span class="o">=</span> <span class="n">all_data</span>
        <span class="n">parvals</span><span class="p">,</span><span class="n">parindex</span> <span class="o">=</span> <span class="p">[],[]</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">this_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;fit parameter&#39;</span><span class="p">):</span>
            <span class="n">parvals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CombineBS</span><span class="p">(</span><span class="n">ival</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span><span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ikey</span><span class="p">),</span><span class="n">resample</span><span class="o">=</span><span class="n">resample</span><span class="p">)[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span>
            <span class="n">parindex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parindex</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">parvals</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">parindex</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">out_series</span></div>

<div class="viewcode-block" id="SetOfFitFuns.MakeFormatted"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.MakeFormatted">[docs]</a>    <span class="k">def</span> <span class="nf">MakeFormatted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">indexl</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names_fmt</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Fit Function&#39;</span><span class="p">,</span><span class="s1">&#39;Fit Ranges&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ifun</span><span class="p">,</span><span class="n">iguess</span><span class="p">,</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ifun</span><span class="p">,</span><span class="s1">&#39;fit&#39;</span><span class="o">+</span><span class="n">xmlfitr</span><span class="p">([</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span><span class="p">])))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names_fmt</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Fit Function&#39;</span><span class="p">,</span><span class="s1">&#39;Fit Ranges One&#39;</span><span class="p">,</span><span class="s1">&#39;Fit Ranges Two&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ifun</span><span class="p">,</span><span class="n">iguess</span><span class="p">,</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span><span class="p">,</span><span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ifun</span><span class="p">,</span><span class="s1">&#39;fit&#39;</span><span class="o">+</span><span class="n">xmlfitr</span><span class="p">([</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span><span class="p">]),</span><span class="s1">&#39;fittwo&#39;</span><span class="o">+</span><span class="n">xmlfitr</span><span class="p">([</span><span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span><span class="p">])))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names_fmt</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Fit Function&#39;</span><span class="p">,</span><span class="s1">&#39;Fit Ranges One&#39;</span><span class="p">,</span><span class="s1">&#39;Shape&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ifun</span><span class="p">,</span><span class="n">iguess</span><span class="p">,</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span><span class="p">,</span><span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ifun</span><span class="p">,</span><span class="s1">&#39;fit&#39;</span><span class="o">+</span><span class="n">xmlfitr</span><span class="p">([</span><span class="n">ifit_min</span><span class="p">,</span><span class="n">ifit_max</span><span class="p">]),</span><span class="s1">&#39;fittwo&#39;</span><span class="o">+</span><span class="n">xmlfitr</span><span class="p">([</span><span class="n">ifit_min_2</span><span class="p">,</span><span class="n">ifit_max_2</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;Error with making formatted fits&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">indexl</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names_fmt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">col_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">icol</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">col_data</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.GetMaxFitr"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetMaxFitr">[docs]</a>    <span class="k">def</span> <span class="nf">GetMaxFitr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">fit_reset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;fit_min_2&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">:</span>
            <span class="n">pick_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fit_reset</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]])]</span>
            <span class="n">fit_reset</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]])]</span>
            <span class="n">fit_reset</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">2</span><span class="p">]])]</span>
            <span class="n">fit_reset</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">3</span><span class="p">]])]</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
                <span class="n">fitr</span> <span class="o">=</span> <span class="s1">&#39;fitr&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">fitr</span> <span class="o">+=</span> <span class="s1">&#39;_fittwor&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fitr</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">4</span><span class="p">],</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pick_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fit_reset</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">0</span><span class="p">]])]</span>
            <span class="n">fit_reset</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">fit_reset</span><span class="p">[</span><span class="n">pick_col</span><span class="p">[</span><span class="mi">1</span><span class="p">]])]</span>
            <span class="n">fit_reset</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
                <span class="n">fitr</span> <span class="o">=</span> <span class="s1">&#39;fitr&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fitr</span> <span class="o">=</span> <span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">fit_reset</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fitr</span><span class="p">,</span><span class="n">fit_reset</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span></div>



<div class="viewcode-block" id="SetOfFitFuns.GetOutputDict"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetOutputDict">[docs]</a>    <span class="k">def</span> <span class="nf">GetOutputDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="n">ODNested</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ifit</span><span class="p">,</span><span class="n">fit_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">this_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FormatIndex</span><span class="p">(</span><span class="n">ifit</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">this_fit</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">output_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">this_fit</span> <span class="o">+=</span> <span class="s1">&#39;_2&#39;</span>
                <span class="k">while</span> <span class="n">this_fit</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">output_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">this_fit</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">output_dict</span><span class="p">[</span><span class="n">this_fit</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">GetOutputDict</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">output_dict</span></div>


    <span class="c1">## returns a series with all the chis combined together</span>
<div class="viewcode-block" id="SetOfFitFuns.GetChiVariation"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.GetChiVariation">[docs]</a>    <span class="k">def</span> <span class="nf">GetChiVariation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">nchi_cutoff</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">chi_range</span><span class="p">,</span><span class="n">rand_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetChiRange</span><span class="p">(</span><span class="n">chi_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">chi_max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">nchi_cutoff</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">chi_range</span> <span class="o">=</span> <span class="n">chi_range</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
        <span class="n">vall</span><span class="p">,</span><span class="n">indexl</span> <span class="o">=</span> <span class="p">[],[]</span>
        <span class="k">for</span> <span class="n">ipar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">par_list</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">this_fun</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ipar</span><span class="p">,</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span>
            <span class="n">this_data</span> <span class="o">=</span> <span class="n">chi_range</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">this_fun</span><span class="p">)</span>
            <span class="n">this_flat_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ival</span><span class="o">.</span><span class="n">bootvals</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_data</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
            <span class="n">this_nboot</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_flat_data</span><span class="p">)</span>
            <span class="n">this_data</span> <span class="o">=</span> <span class="n">BootStrap</span><span class="p">(</span><span class="n">this_nboot</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Combine Fits&#39;</span><span class="p">,</span><span class="n">bootvals</span><span class="o">=</span><span class="n">this_flat_data</span><span class="p">)</span>
            <span class="n">vall</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_data</span><span class="p">)</span>
            <span class="n">indexl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipar</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out_df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">vall</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indexl</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;Combine_Fits&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">out_df</span><span class="p">,</span><span class="n">rand_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;No parameters found ot do variation over&#39;</span><span class="p">)</span></div>


    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    keying:</span>

<span class="sd">    dim1:</span>
<span class="sd">    will find fit_min and fit_max from string</span>
<span class="sd">    return dataframe of fitting classes</span>

<span class="sd">    dim2:</span>
<span class="sd">    fit_min , fit_max</span>
<span class="sd">    return dataframe of fitting classes</span>

<span class="sd">    dim3:</span>
<span class="sd">    function, fit_min , fit_max</span>
<span class="sd">    return dataframe of fitting classes</span>

<span class="sd">    dim4:</span>
<span class="sd">    function, iguess, fit_min , fit_max</span>
<span class="sd">    return dataframe of fitting classes</span>

<span class="sd">    dim5:</span>
<span class="sd">    function, iguess, fit_min , fit_max, parameter</span>
<span class="sd">    return bootstrap class of result</span>
<span class="sd">    &#39;&#39;&#39;</span>

<div class="viewcode-block" id="SetOfFitFuns.Get1D"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Get1D">[docs]</a>    <span class="k">def</span> <span class="nf">Get1D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">4</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="SetOfFitFuns.Get2D_shape"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Get2D_shape">[docs]</a>    <span class="k">def</span> <span class="nf">Get2D_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Get2D_box"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Get2D_box">[docs]</a>    <span class="k">def</span> <span class="nf">Get2D_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">6</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span></div>


    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get1D</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">any</span><span class="p">([</span><span class="s1">&#39;fitr&#39;</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get2D_box</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">any</span><span class="p">([</span><span class="s1">&#39;fitr&#39;</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get2D_shape</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">any</span><span class="p">([</span><span class="s1">&#39;fitr&#39;</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]))</span>

<div class="viewcode-block" id="SetOfFitFuns.Set1D"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Set1D">[docs]</a>    <span class="k">def</span> <span class="nf">Set1D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">4</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="SetOfFitFuns.Set2D_shape"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Set2D_shape">[docs]</a>    <span class="k">def</span> <span class="nf">Set2D_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Set2D_box"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Set2D_box">[docs]</a>    <span class="k">def</span> <span class="nf">Set2D_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmted</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span><span class="o">+</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[:</span><span class="mi">6</span><span class="p">],</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Set1D</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">any</span><span class="p">([</span><span class="s1">&#39;fitr&#39;</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Set2D_box</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">any</span><span class="p">([</span><span class="s1">&#39;fitr&#39;</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim_fit</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Col_Names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Set2D_shape</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">any</span><span class="p">([</span><span class="s1">&#39;fitr&#39;</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]))</span>



    <span class="k">def</span> <span class="nf">__reversed__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">iiloc</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">iiloc</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="SetOfFitFuns.keys"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>
<div class="viewcode-block" id="SetOfFitFuns.values"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span></div>
<div class="viewcode-block" id="SetOfFitFuns.items"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span></div>
<div class="viewcode-block" id="SetOfFitFuns.iterkeys"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.iterkeys">[docs]</a>    <span class="k">def</span> <span class="nf">iterkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>
<div class="viewcode-block" id="SetOfFitFuns.itervalues"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.itervalues">[docs]</a>    <span class="k">def</span> <span class="nf">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span></div>

<div class="viewcode-block" id="SetOfFitFuns.iteritems"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.iteritems">[docs]</a>    <span class="k">def</span> <span class="nf">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span></div>

<div class="viewcode-block" id="SetOfFitFuns.iteritems_fmt"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.iteritems_fmt">[docs]</a>    <span class="k">def</span> <span class="nf">iteritems_fmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span></div>


<div class="viewcode-block" id="SetOfFitFuns.Cut_min_len"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Cut_min_len">[docs]</a>    <span class="k">def</span> <span class="nf">Cut_min_len</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">min_fit_len</span><span class="p">):</span>
        <span class="n">hold_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_index_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">cut_series</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">-</span><span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">min_fit_len</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cut_series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cut_min_len too big, using largest fit range&#39;</span><span class="p">)</span>
            <span class="n">max_cut_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">-</span><span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
            <span class="n">cut_series</span> <span class="o">=</span>  <span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">-</span><span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">==</span> <span class="n">max_cut_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="n">cut_series</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">cut_series</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index_fmt</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Cut_max"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Cut_max">[docs]</a>    <span class="k">def</span> <span class="nf">Cut_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">max_cut</span><span class="p">):</span>
        <span class="n">hold_index_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">cut_series</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">max_cut</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="n">cut_series</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">cut_series</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index_fmt</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Cut_min"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Cut_min">[docs]</a>    <span class="k">def</span> <span class="nf">Cut_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">min_cut</span><span class="p">):</span>
        <span class="n">hold_index_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">cut_series</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">min_cut</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="n">cut_series</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">cut_series</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index_fmt</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetOfFitFuns.Fitr_Len_Sort"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.SetOfFitFuns.Fitr_Len_Sort">[docs]</a>    <span class="k">def</span> <span class="nf">Fitr_Len_Sort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">hold_index_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
        <span class="n">hold_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">hold_fit_fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">-</span><span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;fit_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
        <span class="n">hold_fit_fmt</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span> <span class="o">=</span> <span class="n">hold_fit</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;len&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span> <span class="o">=</span> <span class="n">hold_fit_fmt</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;len&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">hold_index_fmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">Fit_Stats</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="TestSetOfFits"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.TestSetOfFits">[docs]</a><span class="k">def</span> <span class="nf">TestSetOfFits</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">BootStrapping</span> <span class="k">import</span> <span class="n">BootStrap</span>
    <span class="kn">from</span> <span class="nn">PredefFitFuns</span> <span class="k">import</span> <span class="n">LinearFitFun</span><span class="c1">#,ConstantFitFun</span>
    <span class="kn">from</span> <span class="nn">PlotData</span> <span class="k">import</span> <span class="n">colourset8</span>
    <span class="n">xvalssize</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">xvalssize</span><span class="o">/</span><span class="mf">3.</span>
    <span class="n">nboot</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">,</span><span class="n">nboot</span><span class="p">))</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ival</span> <span class="o">+</span> <span class="n">icv</span><span class="o">+</span><span class="mi">100</span> <span class="k">for</span> <span class="n">icv</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">)])</span>
    <span class="n">testdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">BootStrap</span><span class="p">(</span><span class="n">nboot</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;test_bootstrap&#39;</span><span class="p">,</span><span class="n">cfgvals</span><span class="o">=</span><span class="n">ival</span><span class="p">,</span><span class="n">thisDelVal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>

    <span class="n">testdf</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">testdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;xdata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">)]])</span>
    <span class="n">testdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ydata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">testdata</span><span class="p">])</span>
    <span class="n">testdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ydata_Avg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">idata</span><span class="o">.</span><span class="n">Avg</span> <span class="k">for</span> <span class="n">idata</span> <span class="ow">in</span> <span class="n">testdata</span><span class="p">])</span>
    <span class="n">testdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ydata_Std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">idata</span><span class="o">.</span><span class="n">Std</span> <span class="k">for</span> <span class="n">idata</span> <span class="ow">in</span> <span class="n">testdata</span><span class="p">])</span>

    <span class="n">testdf_plot</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">testdf_plot</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;xdata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">))</span>
    <span class="n">testdf_plot</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ydata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">testdata</span><span class="p">)</span>
    <span class="n">testdf_plot</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ydata_Avg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">idata</span><span class="o">.</span><span class="n">Avg</span> <span class="k">for</span> <span class="n">idata</span> <span class="ow">in</span> <span class="n">testdata</span><span class="p">])</span>
    <span class="n">testdf_plot</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ydata_Std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">idata</span><span class="o">.</span><span class="n">Std</span> <span class="k">for</span> <span class="n">idata</span> <span class="ow">in</span> <span class="n">testdata</span><span class="p">])</span>

    <span class="n">testfit</span> <span class="o">=</span> <span class="n">SetOfFitFuns</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">testdf</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Test&#39;</span><span class="p">)</span>

    <span class="n">fit_info</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LinearFitFun</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
    <span class="c1"># fit_info[&#39;Funs&#39;] = [ConstantFitFun,1]</span>
    <span class="c1"># fit_info[&#39;iGuess&#39;] = [0,0]</span>
    <span class="n">testfit</span><span class="o">.</span><span class="n">ScanRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">),</span><span class="n">fit_info</span><span class="p">,</span><span class="n">min_fit_len</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">testfit</span><span class="o">.</span><span class="n">DoFits</span><span class="p">()</span>
    <span class="n">testfit</span><span class="o">.</span><span class="n">SortChi</span><span class="p">()</span>

    <span class="c1"># pl.clf()</span>
    <span class="c1"># pl.errorbar(testdf_plot[&#39;xdata&#39;],testdf_plot[&#39;ydata_Avg&#39;],testdf_plot[&#39;ydata_Std&#39;],label=&#39;data&#39;)</span>
    <span class="c1"># testdf_plot.plot(x=&#39;xdata&#39;,y=&#39;ydata_Avg&#39;,label=&#39;data&#39;)</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">testdf_plot</span><span class="p">[</span><span class="s1">&#39;xdata&#39;</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">testdf_plot</span><span class="p">[</span><span class="s1">&#39;ydata_Avg&#39;</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">testdf_plot</span><span class="p">[</span><span class="s1">&#39;ydata_Std&#39;</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;test data&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colourset8</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;ShowPar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Par2&#39;</span>
    <span class="n">this_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;test_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">hold_series2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fit_vary&#39;</span>
    <span class="n">fit_ranges</span> <span class="o">=</span> <span class="n">testfit</span><span class="o">.</span><span class="n">GetChiRange</span><span class="p">(</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_ranges</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_ranges</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fit &#39;</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;ShowPar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Par2&#39;</span>
    <span class="n">this_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;test_fit_chi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series2</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># for ic,(icol,(ifit,fit_data)) in enumerate(zip(colourset8[1:],testfit.GetChiRange(nchi_cutoff=3).iteritems())):</span>
    <span class="c1">#     hold_series = pa.Series()</span>
    <span class="c1">#     hold_series[&#39;type&#39;] = &#39;fit&#39;</span>
    <span class="c1">#     hold_series[&#39;fit_class&#39;] = fit_data</span>
    <span class="c1">#     hold_series[&#39;label&#39;] = testfit.FormatIndex(ifit)</span>
    <span class="c1">#     hold_series[&#39;color&#39;] = icol</span>
    <span class="c1">#     this_data[&#39;test_fit_chi&#39;+str(ic)] = hold_series</span>



    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/TestFitChiPlot.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test Fitting&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test x&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test y&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>

    <span class="kn">import</span> <span class="nn">PlotData</span> <span class="k">as</span> <span class="nn">jpl</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">jpl</span><span class="o">.</span><span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">LoadPickle</span><span class="p">(</span><span class="n">DefWipe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">testdata</span><span class="p">,</span><span class="n">testfit</span></div>


<div class="viewcode-block" id="TestSetOfFits_2D"><a class="viewcode-back" href="../SetsOfFits.html#SetsOfFits.TestSetOfFits_2D">[docs]</a><span class="k">def</span> <span class="nf">TestSetOfFits_2D</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">BootStrapping</span> <span class="k">import</span> <span class="n">BootStrap</span>
    <span class="kn">from</span> <span class="nn">PredefFitFuns</span> <span class="k">import</span> <span class="n">LinearFF_2D</span><span class="c1">#,ConstantFitFun</span>
    <span class="kn">from</span> <span class="nn">PlotData</span> <span class="k">import</span> <span class="n">colourset8</span>
    <span class="n">xvalssize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">)</span><span class="o">/</span><span class="mf">3.</span>
    <span class="n">nboot</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span><span class="n">size</span><span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">),</span><span class="n">nboot</span><span class="p">))</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ival</span> <span class="o">+</span> <span class="n">icv</span><span class="o">+</span><span class="mi">10</span> <span class="k">for</span> <span class="n">icv</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">)])</span>
    <span class="n">testdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">BootStrap</span><span class="p">(</span><span class="n">nboot</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;test_bootstrap&#39;</span><span class="p">,</span><span class="n">cfgvals</span><span class="o">=</span><span class="n">ival</span><span class="p">,</span><span class="n">thisDelVal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
    <span class="n">testdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">testdata</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">)</span>
    <span class="n">xdata_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xvalssize</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>
    <span class="n">xdata_2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">xdata_1</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()))</span>
    <span class="n">xdata_1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">xdata_1</span><span class="o">.</span><span class="n">flatten</span><span class="p">()))</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">xdata_1</span><span class="p">,</span><span class="n">xdata_2</span><span class="p">]</span>
    <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">xdata</span><span class="p">)),</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;dim1&#39;</span><span class="p">,</span><span class="s1">&#39;dim2&#39;</span><span class="p">])</span>
    <span class="n">this_plot_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">testdata</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span>
    <span class="c1"># print &#39;DEBUG&#39;</span>
    <span class="c1"># print this_data</span>

    <span class="c1"># testdf = pa.DataFrame()</span>
    <span class="c1"># testdf.loc[:,&#39;xdata&#39;] = pa.Series([[np.arange(xvalssize)]])</span>
    <span class="c1"># testdf.loc[:,&#39;ydata&#39;] = pa.Series([testdata])</span>
    <span class="c1"># testdf.loc[:,&#39;ydata_Avg&#39;] = pa.Series([idata.Avg for idata in testdata])</span>
    <span class="c1"># testdf.loc[:,&#39;ydata_Std&#39;] = pa.Series([idata.Std for idata in testdata])</span>


    <span class="n">testfit</span> <span class="o">=</span> <span class="n">SetOfFitFuns</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Test&#39;</span><span class="p">)</span>

    <span class="n">fit_info</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fit_info</span><span class="p">[</span><span class="s1">&#39;Funs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LinearFF_2D</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
    <span class="c1"># fit_info[&#39;Funs&#39;] = [ConstantFitFun,1]</span>
    <span class="c1"># fit_info[&#39;iGuess&#39;] = [0,0]</span>
    <span class="n">testfit</span><span class="o">.</span><span class="n">ScanBox</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">xvalssize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="n">xvalssize</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">fit_info</span><span class="p">,</span><span class="n">min_fit_len_1</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">min_fit_len_2</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">testfit</span><span class="o">.</span><span class="n">DoFits</span><span class="p">()</span>
    <span class="n">testfit</span><span class="o">.</span><span class="n">SortChi</span><span class="p">()</span>

    <span class="c1"># pl.clf()</span>
    <span class="c1"># pl.errorbar(testdf_plot[&#39;xdata&#39;],testdf_plot[&#39;ydata_Avg&#39;],testdf_plot[&#39;ydata_Std&#39;],label=&#39;data&#39;)</span>
    <span class="c1"># testdf_plot.plot(x=&#39;xdata&#39;,y=&#39;ydata_Avg&#39;,label=&#39;data&#39;)</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;from_keys&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Avg</span><span class="p">)</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar_vary&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;test data&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colourset8</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;ShowPar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Par2&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;otherXvals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">this_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;test_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">hold_series2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fit_vary&#39;</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;First&#39;</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">testfit</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fit &#39;</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;ShowPar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Par0&#39;</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">hold_series2</span><span class="p">[</span><span class="s1">&#39;otherXvals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">this_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;test_fit_chi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series2</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># for ic,(icol,(ifit,fit_data)) in enumerate(zip(colourset8[1:],testfit.GetChiRange(nchi_cutoff=3).iteritems())):</span>
    <span class="c1">#     hold_series = pa.Series()</span>
    <span class="c1">#     hold_series[&#39;type&#39;] = &#39;fit&#39;</span>
    <span class="c1">#     hold_series[&#39;fit_class&#39;] = fit_data</span>
    <span class="c1">#     hold_series[&#39;label&#39;] = testfit.FormatIndex(ifit)</span>
    <span class="c1">#     hold_series[&#39;color&#39;] = icol</span>
    <span class="c1">#     this_data[&#39;test_fit_chi&#39;+str(ic)] = hold_series</span>



    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/TestFitChiPlot_2D.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test Fitting 2D&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test x[0]&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test y&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>

    <span class="kn">import</span> <span class="nn">PlotData</span> <span class="k">as</span> <span class="nn">jpl</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">jpl</span><span class="o">.</span><span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">LoadPickle</span><span class="p">(</span><span class="n">DefWipe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">testdata</span><span class="p">,</span><span class="n">testfit</span></div>

    <span class="c1"># testfit.PlotFunction()</span>
    <span class="c1"># pl.legend()</span>
    <span class="c1"># pl.savefig(this_dir+&#39;/TestGraphs/TestFuns.pdf&#39;)</span>

    <span class="c1">#</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">testdata</span><span class="p">,</span><span class="n">testfit</span> <span class="o">=</span> <span class="n">TestSetOfFits</span><span class="p">()</span>
    <span class="n">testdata_2D</span><span class="p">,</span><span class="n">testfit_2D</span> <span class="o">=</span> <span class="n">TestSetOfFits_2D</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;data is in testdata,testfit and testdata_2D, testfit_2D&#39;</span><span class="p">)</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jack Dragos

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>