

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PlotData &mdash; LQCD Analysis Codebase TF Fits documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> LQCD Analysis Codebase
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Python_Analysis</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LQCD Analysis Codebase</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>PlotData</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for PlotData</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1"># import matplotlib</span>
<span class="c1"># matplotlib.use(&#39;Agg&#39;) # Must be before importing matplotlib.pyplot or pylab!</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">pl</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">Params</span> <span class="k">import</span> <span class="n">plot_style</span><span class="p">,</span><span class="n">this_dir</span>
<span class="kn">from</span> <span class="nn">NullPlotData</span> <span class="k">import</span> <span class="n">fillalpha</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pa</span>
<span class="kn">from</span> <span class="nn">BootStrapping</span> <span class="k">import</span> <span class="n">BootStrap</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">SetsOfFits</span> <span class="k">as</span> <span class="nn">sff</span>
<span class="kn">from</span> <span class="nn">MiscFuns</span> <span class="k">import</span> <span class="n">Series_TO_ODict</span><span class="p">,</span><span class="n">ODNested</span><span class="p">,</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">fmt_Qt5_col</span><span class="p">,</span><span class="n">mkdir_p</span><span class="p">,</span><span class="n">DEBUGprint</span>
<span class="kn">from</span> <span class="nn">XmlFormatting</span> <span class="k">import</span> <span class="n">AvgStdToFormat</span><span class="p">,</span><span class="n">minfmt</span><span class="p">,</span><span class="n">maxfmt</span><span class="p">,</span><span class="n">MakeValAndErr</span><span class="p">,</span><span class="n">MakeVal</span>
<span class="kn">from</span> <span class="nn">FileIO</span> <span class="k">import</span> <span class="n">WriteXml</span><span class="p">,</span><span class="n">WritePickle</span><span class="p">,</span><span class="n">ReadPickleWrap</span><span class="p">,</span><span class="n">Construct_File_Object</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">deepcopy</span><span class="p">,</span><span class="n">copy</span>
<span class="kn">from</span> <span class="nn">XmlFormatting</span> <span class="k">import</span> <span class="n">LegendFmt</span>
<span class="kn">from</span> <span class="nn">NullPlotData</span> <span class="k">import</span> <span class="n">null_series</span>

<span class="n">Py2Read</span> <span class="o">=</span> <span class="kc">False</span>


<span class="kn">import</span> <span class="nn">os</span>
<span class="c1"># import seaborn as sns</span>
<span class="c1">#</span>
<span class="c1"># sns.set_style(&quot;darkgrid&quot;,{&#39;legend.frameon&#39;:True,&#39;errorbar.capsize&#39;:5})</span>

<div class="viewcode-block" id="CheckNothing"><a class="viewcode-back" href="../PlotData.html#PlotData.CheckNothing">[docs]</a><span class="k">def</span> <span class="nf">CheckNothing</span><span class="p">(</span><span class="n">this_dict</span><span class="p">,</span><span class="n">this_key</span><span class="p">,</span><span class="n">check_false</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">null_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">this_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">is_nothing</span> <span class="o">=</span> <span class="n">this_dict</span><span class="p">[</span><span class="n">this_key</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">check_false</span><span class="p">:</span>
            <span class="n">is_nothing</span> <span class="o">=</span> <span class="n">is_nothing</span> <span class="ow">and</span> <span class="n">this_dict</span><span class="p">[</span><span class="n">this_key</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span>
        <span class="n">is_nothing</span> <span class="o">=</span> <span class="n">is_nothing</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">this_dict</span><span class="p">[</span><span class="n">this_key</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">is_nothing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">null_type</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">this_dict</span><span class="p">[</span><span class="n">this_key</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">this_dict</span><span class="p">[</span><span class="n">this_key</span><span class="p">]</span></div>



<div class="viewcode-block" id="fmt_data_str"><a class="viewcode-back" href="../PlotData.html#PlotData.fmt_data_str">[docs]</a><span class="k">def</span> <span class="nf">fmt_data_str</span><span class="p">(</span><span class="n">idata</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">idata</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">idata</span><span class="o">.</span><span class="n">name</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">idata</span></div>

<div class="viewcode-block" id="tuple_wrap"><a class="viewcode-back" href="../PlotData.html#PlotData.tuple_wrap">[docs]</a><span class="k">def</span> <span class="nf">tuple_wrap</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span><span class="nb">tuple</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">val</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val</span></div>

<span class="n">tpad</span><span class="p">,</span><span class="n">tsize</span><span class="p">,</span><span class="n">xsize</span><span class="p">,</span><span class="n">ysize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span>
<span class="n">legcol</span><span class="p">,</span><span class="n">legsize</span><span class="p">,</span><span class="n">legalpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mf">0.7</span>
<span class="n">linewidth</span><span class="p">,</span><span class="n">dotsize</span><span class="p">,</span><span class="n">errorbarlen</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span>
<span class="n">def_tick_size</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">def_grid</span> <span class="o">=</span> <span class="kc">True</span>
<span class="c1"># linewidth,dotsize,errorbarlen = 4,20,12</span>
<span class="c1"># def_tick_size = 55</span>
<span class="c1"># def_grid = False</span>

<span class="c1">## Move Somewhere?</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;legend.fontsize&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
          <span class="s1">&#39;xtick.labelsize&#39;</span><span class="p">:</span><span class="n">def_tick_size</span><span class="p">,</span>
          <span class="s1">&#39;ytick.labelsize&#39;</span><span class="p">:</span><span class="n">def_tick_size</span><span class="p">,</span>
          <span class="s1">&#39;legend.numpoints&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s1">&#39;axes.labelsize&#39;</span> <span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
          <span class="s1">&#39;axes.titlesize&#39;</span> <span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
          <span class="s1">&#39;figure.autolayout&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s1">&#39;axes.grid&#39;</span><span class="p">:</span> <span class="n">def_grid</span><span class="p">,</span>
          <span class="s1">&#39;errorbar.capsize&#39;</span><span class="p">:</span> <span class="n">errorbarlen</span><span class="p">,</span>
          <span class="s1">&#39;lines.markersize&#39;</span><span class="p">:</span> <span class="n">dotsize</span><span class="p">,</span>
          <span class="s1">&#39;lines.linewidth&#39;</span><span class="p">:</span> <span class="n">linewidth</span><span class="p">,</span>
          <span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
          <span class="c1"># &#39;lines.markeredgewidth&#39;:2,</span>
          <span class="s1">&#39;axes.xmargin&#39;</span><span class="p">:</span><span class="mf">0.01</span><span class="p">,</span>
          <span class="s1">&#39;axes.ymargin&#39;</span><span class="p">:</span><span class="mf">0.01</span><span class="p">}</span>
<span class="c1"># params = {&#39;errorbar.capsize&#39;: 5}</span>
<span class="n">pl</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">plot_style</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>


<span class="n">colourset8</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;#000080&#39;</span><span class="p">,</span><span class="s1">&#39;#B22222&#39;</span><span class="p">,</span><span class="s1">&#39;#00B800&#39;</span><span class="p">,</span><span class="s1">&#39;#8B008B&#39;</span><span class="p">,</span> <span class="s1">&#39;#0000FF&#39;</span><span class="p">,</span><span class="s1">&#39;#FF0000&#39;</span><span class="p">,</span><span class="s1">&#39;#000000&#39;</span><span class="p">,</span><span class="s1">&#39;#32CD32&#39;</span><span class="p">,</span><span class="s1">&#39;#FF0066&#39;</span><span class="p">]</span>
<span class="n">markerset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;^&#39;</span><span class="p">,</span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]</span>
<span class="n">shiftmax</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">shiftper</span> <span class="o">=</span> <span class="mf">0.005</span> <span class="c1">##R function shift</span>
<span class="n">shiftset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">ish</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">shiftmax</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span> <span class="n">shiftset</span> <span class="o">+=</span> <span class="p">[</span><span class="o">-</span><span class="n">ish</span><span class="o">*</span><span class="n">shiftper</span><span class="p">,</span><span class="n">ish</span><span class="o">*</span><span class="n">shiftper</span><span class="p">]</span>
<span class="k">del</span> <span class="n">ish</span><span class="p">,</span> <span class="n">shiftmax</span><span class="p">,</span><span class="n">shiftper</span>




<div class="viewcode-block" id="Fix_Se_Keys"><a class="viewcode-back" href="../PlotData.html#PlotData.Fix_Se_Keys">[docs]</a><span class="k">def</span> <span class="nf">Fix_Se_Keys</span><span class="p">(</span><span class="n">this_key</span><span class="p">,</span><span class="n">this_Se</span><span class="p">):</span>
    <span class="n">new_i</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">iindex</span> <span class="ow">in</span> <span class="n">this_Se</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">df_key</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">this_key</span><span class="p">,</span><span class="n">iindex</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df_key</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">bytes_</span><span class="p">):</span>
                <span class="n">df_key</span> <span class="o">=</span> <span class="n">df_key</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">)</span>
            <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_key</span><span class="p">)</span>
        <span class="n">new_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">temp</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">name_l</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">iname</span><span class="p">)</span> <span class="k">for</span> <span class="n">iname</span> <span class="ow">in</span> <span class="n">this_Se</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">]</span>
        <span class="n">this_Se</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">new_i</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">name_l</span><span class="p">)</span>
    <span class="n">out_key</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_key</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">bytes_</span><span class="p">):</span>
            <span class="n">ikey</span> <span class="o">=</span> <span class="n">ikey</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">)</span>
        <span class="n">out_key</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;b</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">out_key</span><span class="p">),</span><span class="n">this_Se</span></div>
<span class="c1">#</span>
<span class="c1"># def Fix_Se_Keys(this_key,this_Se):</span>
<span class="c1">#     return this_Se</span>

<span class="c1">## this only works if they are in order, Add wrapper to this where it is sorted and unsorted!</span>
<div class="viewcode-block" id="Shift_Duplicates"><a class="viewcode-back" href="../PlotData.html#PlotData.Shift_Duplicates">[docs]</a><span class="k">def</span> <span class="nf">Shift_Duplicates</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span><span class="n">this_shiftper</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x_data</span>
    <span class="n">list_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_data</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_data</span><span class="p">)</span>
    <span class="n">this_shiftper</span> <span class="o">=</span> <span class="n">this_shiftper</span><span class="o">*</span><span class="n">list_len</span> <span class="c1">##R function shift</span>
    <span class="n">this_shiftset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">ish</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">):</span>
        <span class="n">this_shiftset</span> <span class="o">+=</span> <span class="p">[</span><span class="o">-</span><span class="n">ish</span><span class="o">*</span><span class="n">this_shiftper</span><span class="p">,</span><span class="n">ish</span><span class="o">*</span><span class="n">this_shiftper</span><span class="p">]</span>
    <span class="n">prev_shifted</span><span class="p">,</span><span class="n">shift_index</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="mi">0</span>
    <span class="n">x_out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ic</span><span class="p">,</span><span class="n">ix</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">x_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ix</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">x_data</span><span class="p">[:</span><span class="n">ic</span><span class="p">])</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">x_data</span><span class="p">[(</span><span class="n">ic</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):]):</span>
            <span class="k">if</span> <span class="n">ix</span> <span class="o">!=</span> <span class="n">prev_shifted</span><span class="p">:</span>
                <span class="n">prev_shifted</span> <span class="o">=</span> <span class="n">ix</span>
                <span class="n">shift_index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">shift_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">x_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ix</span><span class="o">+</span><span class="n">this_shiftset</span><span class="p">[</span><span class="n">shift_index</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x_out</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">x_data</span><span class="p">)(</span><span class="n">x_out</span><span class="p">)</span></div>

<span class="k">if</span> <span class="n">Py2Read</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">Un_Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">):</span>
        <span class="n">this_key_select</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ic</span><span class="p">,</span><span class="n">ikey</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">slice</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;t_f&#39;</span> <span class="ow">in</span> <span class="n">ikey</span><span class="p">:</span>
                <span class="c1"># this_key_select[ic] = bytes(ikey.replace(&#39;b\&#39;&#39;,&#39;&#39;).replace(&#39;\&#39;&#39;,&#39;&#39;),&#39;ascii&#39;).decode(&#39;ascii&#39;)</span>
                <span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">ikey</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;b</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">),</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_data</span><span class="p">,</span><span class="n">add_b</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">first_index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_data</span><span class="o">.</span><span class="n">index</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">key_types</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span><span class="n">first_index</span><span class="p">)</span>
        <span class="n">this_key_select</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ic</span><span class="p">,(</span><span class="n">ikey</span><span class="p">,</span><span class="n">ikey_sel</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">key_types</span><span class="p">,</span><span class="n">this_key_select</span><span class="p">)):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey_sel</span><span class="p">,</span><span class="nb">slice</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey_sel</span><span class="p">,</span><span class="n">ikey</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">]</span> <span class="o">=</span> <span class="n">ikey</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">])</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;b</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">this_data</span><span class="o">.</span><span class="n">index</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">ic</span><span class="p">])</span> <span class="ow">and</span> <span class="n">add_b</span><span class="p">:</span>
                            <span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">]</span> <span class="o">=</span> <span class="n">ikey</span><span class="p">(</span><span class="s1">&#39;b</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;b</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">]</span> <span class="o">=</span> <span class="n">ikey</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">[</span><span class="n">ic</span><span class="p">],</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
<div class="viewcode-block" id="Fix_Key_Select"><a class="viewcode-back" href="../PlotData.html#PlotData.Fix_Key_Select">[docs]</a>    <span class="k">def</span> <span class="nf">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_data</span><span class="p">,</span><span class="n">add_b</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">this_key_select</span></div>

<div class="viewcode-block" id="Un_Fix_Key_Select"><a class="viewcode-back" href="../PlotData.html#PlotData.Un_Fix_Key_Select">[docs]</a>    <span class="k">def</span> <span class="nf">Un_Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">this_key_select</span></div>



<div class="viewcode-block" id="Plotting"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting">[docs]</a><span class="k">class</span> <span class="nc">Plotting</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to organise and duplicate the plotting.</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Plotting.Construct_Plot_File"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.Construct_Plot_File">[docs]</a>    <span class="k">def</span> <span class="nf">Construct_Plot_File</span><span class="p">(</span><span class="n">this_file</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Construct_File_Object</span><span class="p">(</span><span class="n">this_file</span><span class="p">,</span><span class="n">Plotting</span><span class="p">)</span></div>



    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(),</span> <span class="n">plot_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()):</span>

        <span class="c1">## currenlty only implementing single plot per plane</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MakePlane</span><span class="p">()</span>


        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        plot_data must be pandas DataFrame or list of DataFrames</span>
<span class="sd">        if dictionary passed, dictionary will be converted into DataFrame.</span>

<span class="sd">        Contains:</span>
<span class="sd">        columns:</span>
<span class="sd">            - number of data points</span>
<span class="sd">        keys:</span>
<span class="sd">            x_data, y_data, (xerr_data, yerr_data,)</span>
<span class="sd">            type, (errorbar, plot, hist etc..),</span>
<span class="sd">            label, color, symbol</span>

<span class="sd">        plotting a fit is done through:</span>
<span class="sd">        type = &#39;fit&#39;</span>
<span class="sd">        fit_class = instance of Fitting from FitFunctions.py</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportData</span><span class="p">(</span><span class="n">plot_data</span><span class="p">)</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        plot_info must be pandas Series, with elements:</span>

<span class="sd">        title, x_label, y_label, etc..</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ImportInfo</span><span class="p">(</span><span class="n">plot_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddNulls</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">colcyc</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">colourset8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symcyc</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">markerset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shiftcyc</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">shiftset</span><span class="p">)</span>

<div class="viewcode-block" id="Plotting.ImportInfo"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.ImportInfo">[docs]</a>    <span class="k">def</span> <span class="nf">ImportInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot_info</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_info</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="o">=</span> <span class="n">plot_info</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_info</span><span class="p">,(</span><span class="nb">dict</span><span class="p">,</span><span class="n">OrderedDict</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="n">ikey</span><span class="p">]</span> <span class="o">=</span> <span class="n">ival</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;pandas Series for plot_info not passed into plotting class&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;style&#39;</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;leg_loc&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_loc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;best&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;leg_ncol&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_ncol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">legcol</span>
        <span class="k">if</span> <span class="s1">&#39;leg_fontsize&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_fontsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">legsize</span>
        <span class="k">if</span> <span class="s1">&#39;leg_alpha&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_alpha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">legalpha</span>
        <span class="k">if</span> <span class="s1">&#39;y_plot_scale&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;y_plot_scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;x_plot_scale&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;x_plot_scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;save_file&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">HumanFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.pdf&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.pdf&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py3p&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;.pdf&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.pdf&#39;</span></div>

<div class="viewcode-block" id="Plotting.UpdateInfo"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.UpdateInfo">[docs]</a>    <span class="k">def</span> <span class="nf">UpdateInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot_info</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">plot_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ImportInfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plotting.GetFuns"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.GetFuns">[docs]</a>    <span class="k">def</span> <span class="nf">GetFuns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s2">&quot;plot_data&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;import data before fixing functions&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">col_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;fit_class&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">col_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="s1">&#39;GetFuns&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ival</span><span class="p">,</span><span class="s1">&#39;GetFuns&#39;</span><span class="p">):</span>
                            <span class="n">ival</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span>
                            <span class="c1"># self.plot_data[icol][&#39;fit_class&#39;][ikey].GetFuns()</span>
                            <span class="c1"># if isinstance(ival.Fun,str) and &#39;FNF&#39; in ival.Fun:</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ival</span><span class="o">.</span><span class="n">Fun</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                                <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;fit &#39;</span><span class="o">+</span><span class="n">ival</span><span class="o">.</span><span class="n">Fun</span><span class="p">)</span></div>
                            <span class="c1"># if ival.FunDer == &#39;file_not_found&#39;:</span>
                            <span class="c1">#     raise EnvironmentError(&#39;FNF for fitting derivative: \n&#39; + ival.FunDer_name)</span>

<div class="viewcode-block" id="Plotting.RemoveFuns"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.RemoveFuns">[docs]</a>    <span class="k">def</span> <span class="nf">RemoveFuns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s2">&quot;plot_data&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;import data before fixing functions&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">col_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;fit_class&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">col_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="s1">&#39;RemoveFuns&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">RemoveFuns</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ival</span><span class="p">,</span><span class="s1">&#39;RemoveFuns&#39;</span><span class="p">):</span>
                            <span class="c1"># self.plot_data[icol][&#39;fit_class&#39;][ikey].RemoveFuns()</span>
                            <span class="n">ival</span><span class="o">.</span><span class="n">RemoveFuns</span><span class="p">()</span></div>

<div class="viewcode-block" id="Plotting.GetAspectRatio"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.GetAspectRatio">[docs]</a>    <span class="k">def</span> <span class="nf">GetAspectRatio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span></div>

<div class="viewcode-block" id="Plotting.SetAspectRatio"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.SetAspectRatio">[docs]</a>    <span class="k">def</span> <span class="nf">SetAspectRatio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ratio</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plotting.Flip_Axies"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.Flip_Axies">[docs]</a>    <span class="k">def</span> <span class="nf">Flip_Axies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Flip_X_Axis</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Flip_Y_Axis</span><span class="p">()</span></div>

<div class="viewcode-block" id="Plotting.Flip_X_Axis"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.Flip_X_Axis">[docs]</a>    <span class="k">def</span> <span class="nf">Flip_X_Axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;X_axis flip needs more carefull consideration since it is multidimensional&#39;</span><span class="p">)</span></div>
        <span class="c1"># for ikey,idata in self.plot_data.items():</span>
        <span class="c1">#     if &#39;fit_class&#39; in idata.keys() and hasattr(idata[&#39;fit_class&#39;],&#39;Flip_X_Axis&#39;):</span>
        <span class="c1">#         idata[&#39;fit_class&#39;].Flip_X_Axis()</span>
        <span class="c1">#         if &#39;otherXvals&#39; in idata and isinstance(idata[&#39;otherXvals&#39;],(list,tuple,np.ndarray)):</span>
        <span class="c1">#             idata[&#39;otherXvals&#39;] = type(idata[&#39;otherXvals&#39;])([-ix for ix in idata[&#39;otherXvals&#39;]])</span>
        <span class="c1">#         if &#39;xdatarange&#39; not in idata and not isinstance(idata[&#39;xdatarange&#39;],str):</span>
        <span class="c1">#             hold_xrange = [0,0]</span>
        <span class="c1">#             if idata[&#39;xdatarange&#39;][-1] == &#39;ToDataMax&#39;:</span>
        <span class="c1">#                 hold_xrange[0] = &#39;FromDataMin&#39;</span>
        <span class="c1">#             else:</span>
        <span class="c1">#                 hold_xrange[0] = -idata[&#39;xdatarange&#39;][-1]</span>
        <span class="c1">#             if idata[&#39;xdatarange&#39;][0] == &#39;FromDataMin&#39;:</span>
        <span class="c1">#                 hold_xrange[-1] = &#39;ToDataMax&#39;</span>
        <span class="c1">#             else:</span>
        <span class="c1">#                 hold_xrange[-1] = -idata[&#39;xdatarange&#39;][0]</span>
        <span class="c1">#             idata[&#39;xdatarange&#39;] = hold_xrange</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         if &#39;x_data_median&#39; in idata and idata[&#39;x_data_median&#39;] is not None:</span>
        <span class="c1">#             idata[&#39;x_data_median&#39;] = -idata[&#39;x_data_median&#39;]</span>
        <span class="c1">#             if hasattr(idata[&#39;x_data_median&#39;],&#39;Stats&#39;):</span>
        <span class="c1">#                 idata[&#39;x_data_median&#39;].Stats()</span>
        <span class="c1">#         if &#39;x_data&#39; in idata and idata[&#39;x_data&#39;] is not None:</span>
        <span class="c1">#             idata[&#39;x_data&#39;] = -idata[&#39;x_data&#39;]</span>
        <span class="c1">#             if hasattr(idata[&#39;x_data&#39;],&#39;Stats&#39;):</span>
        <span class="c1">#                 idata[&#39;x_data&#39;].Stats()</span>
        <span class="c1"># for icx, ix in self.plot_info[&#39;xlims&#39;]:</span>
        <span class="c1">#     if ix is not None and ix is not False:</span>
        <span class="c1">#         self.plot_info[&#39;xlims&#39;][icx] = -ix</span>
        <span class="c1"># hold = copy(self.plot_info[&#39;xlims&#39;][1])</span>
        <span class="c1"># self.plot_info[&#39;xlims&#39;][1] = self.plot_info[&#39;xlims&#39;][0]</span>
        <span class="c1"># self.plot_info[&#39;xlims&#39;][0] = hold</span>


<div class="viewcode-block" id="Plotting.Flip_Y_Axis"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.Flip_Y_Axis">[docs]</a>    <span class="k">def</span> <span class="nf">Flip_Y_Axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">idata</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;arrow&#39;</span> <span class="ow">in</span> <span class="n">idata</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                <span class="n">idata</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">iy</span> <span class="k">for</span> <span class="n">iy</span> <span class="ow">in</span> <span class="n">idata</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]]</span>
        <span class="k">if</span> <span class="s1">&#39;ylims&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">icy</span><span class="p">,</span> <span class="n">iy</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">iy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iy</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="n">icy</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">iy</span>
            <span class="n">hold</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">idata</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">this_logic</span> <span class="o">=</span> <span class="s1">&#39;scale&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">idata</span>
            <span class="n">this_logic</span> <span class="o">=</span> <span class="n">this_logic</span> <span class="ow">and</span> <span class="n">idata</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">this_logic</span> <span class="o">=</span> <span class="n">this_logic</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idata</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">this_logic</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">ikey</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">ikey</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">ikey</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span></div>

<div class="viewcode-block" id="Plotting.ImportData"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.ImportData">[docs]</a>    <span class="k">def</span> <span class="nf">ImportData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="n">plot_data</span>
            <span class="c1"># print &#39;DEBUG&#39;</span>
            <span class="c1"># for ikey,iplot in self.plot_data.iteritems():</span>
            <span class="c1">#     print ikey, iplot[&#39;type&#39;]</span>
            <span class="c1">#     print &#39;\n   &#39;.join(iplot.keys())</span>
            <span class="c1">#     if &#39;y_data&#39; in iplot.keys():</span>
            <span class="c1">#         print iplot[&#39;y_data&#39;]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,(</span><span class="nb">dict</span><span class="p">,</span><span class="n">OrderedDict</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">ikey</span><span class="p">]</span> <span class="o">=</span> <span class="n">ival</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ic</span><span class="p">,</span><span class="n">iplot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plot_data</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
                    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">iplot</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">iplot</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ic</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">hold_series</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ic</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">iplot</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;invalid data type for plot_data passed into plotting class&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FormatSetsOfFits</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span></div>
        <span class="c1"># self.AddNulls()</span>

<div class="viewcode-block" id="Plotting.AppendData"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.AppendData">[docs]</a>    <span class="k">def</span> <span class="nf">AppendData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;label&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">plot_data</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
            <span class="n">this_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">plot_data</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">this_name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">key_next</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">while</span> <span class="nb">str</span><span class="p">(</span><span class="n">this_name</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">key_next</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">key_next</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">plot_data</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">this_name</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">key_next</span><span class="p">)</span>
            <span class="n">this_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">plot_data</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">this_name</span> <span class="p">:</span> <span class="n">plot_data</span><span class="p">})</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,(</span><span class="nb">dict</span><span class="p">,</span><span class="n">OrderedDict</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">this_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;label&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">ival</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">this_name</span> <span class="o">=</span> <span class="n">ival</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">this_name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">key_next</span> <span class="o">=</span> <span class="mi">2</span>
                    <span class="k">while</span> <span class="nb">str</span><span class="p">(</span><span class="n">this_name</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">key_next</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                        <span class="n">key_next</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">this_name</span> <span class="o">=</span> <span class="n">this_name</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">key_next</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">this_name</span> <span class="p">:</span> <span class="n">ival</span><span class="p">})</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">ic</span><span class="p">,</span><span class="n">iplot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plot_data</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot</span><span class="p">,(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
                    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">iplot</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">iplot</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                        <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ic</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">hold_series</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ic</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">iplot</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;invalid data type for plot_data passed into plotting class&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FormatSetsOfFits</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddNulls</span><span class="p">()</span></div>

<div class="viewcode-block" id="Plotting.AddNulls"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.AddNulls">[docs]</a>    <span class="k">def</span> <span class="nf">AddNulls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">out_plot_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">icol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">null_series</span><span class="p">)</span>
            <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">CheckNothing</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">],</span><span class="s1">&#39;plot_this&#39;</span><span class="p">,</span><span class="n">null_type</span><span class="o">=</span><span class="s1">&#39;Not_In&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;Not_In&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CheckNothing</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">],</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">,</span><span class="n">null_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;plot&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;_vary&#39;</span> <span class="ow">in</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;key_select&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="s1">&#39;y_data&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;y_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="s1">&#39;boot_data&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;boot_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;boot_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="s1">&#39;fit_class&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="s1">&#39;x_data&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;x_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;fit&#39;</span> <span class="ow">in</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),)</span><span class="o">+</span><span class="nb">tuple</span><span class="p">(</span><span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">:])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">out_plot_data</span><span class="p">[</span><span class="n">icol</span><span class="p">][</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span> <span class="o">=</span> <span class="n">out_plot_data</span>
        <span class="k">if</span> <span class="s1">&#39;xlims&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">icx</span><span class="p">,</span><span class="n">ix</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">]):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">][</span><span class="n">icx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s1">&#39;ylims&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">icy</span><span class="p">,</span><span class="n">iy</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">]):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iy</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="n">icy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></div>
            <span class="c1"># if &#39;fit&#39; in col_data[&#39;type&#39;]:</span>
            <span class="c1">#     if &#39;fit_class&#39; not in col_data or \</span>
            <span class="c1">#     not isinstance(col_data[&#39;fit_class&#39;],ff.Fitting):</span>
            <span class="c1">#         raise IOError(&#39;plotting a fit requires fit class to be in fit_class&#39;)</span>

    <span class="c1"># def RemoveNulls(self):</span>
    <span class="c1">#     for icol,col_data in self.plot_data.iteritems():</span>
    <span class="c1">#         if &#39;label&#39; not in col_data or col_data[&#39;label&#39;] is None:</span>
    <span class="c1">#             self.plot_data[icol][&#39;label&#39;] = False</span>
    <span class="c1">#         if &#39;color&#39; not in col_data or col_data[&#39;color&#39;] is None:</span>
    <span class="c1">#             self.plot_data[icol][&#39;color&#39;] = False</span>
    <span class="c1">#         if &#39;symbol&#39; not in col_data or col_data[&#39;symbol&#39;] is None:</span>
    <span class="c1">#             self.plot_data[icol][&#39;symbol&#39;] = False</span>
    <span class="c1">#         if &#39;shift&#39; not in col_data or col_data[&#39;shift&#39;] is None:</span>
    <span class="c1">#             self.plot_data[icol][&#39;shift&#39;] = False</span>
    <span class="c1">#     if &#39;xlims&#39; in self.plot_info:</span>
    <span class="c1">#         for icx,ix in enumerate(self.plot_info[&#39;xlims&#39;]):</span>
    <span class="c1">#             if ix is None:</span>
    <span class="c1">#                 self.plot_info[&#39;xlims&#39;][icx] = False</span>
    <span class="c1">#     if &#39;ylims&#39; in self.plot_info:</span>
    <span class="c1">#         for icy,iy in enumerate(self.plot_info[&#39;ylims&#39;]):</span>
    <span class="c1">#             if iy is None:</span>
    <span class="c1">#                 self.plot_info[&#39;ylims&#39;][icy] = False</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">output_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;INFO:&#39;</span><span class="p">)</span>
        <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
        <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DATA:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">idata</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="o">+</span><span class="n">ikey</span><span class="p">)</span>
            <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idata</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fmt_data_str</span><span class="p">)</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_list</span><span class="p">)</span>

<div class="viewcode-block" id="Plotting.PrintData"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.PrintData">[docs]</a>    <span class="k">def</span> <span class="nf">PrintData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>
        <span class="c1"># print(&#39;INFO:&#39;)</span>
        <span class="c1"># print(self.plot_info)</span>
        <span class="c1"># print()</span>
        <span class="c1"># print(&#39;DATA:&#39;)</span>
        <span class="c1"># for ikey,idata in self.plot_data.items():</span>
        <span class="c1">#     print(&#39;    &#39;,ikey)</span>
        <span class="c1">#     print(idata.apply(fmt_data_str))</span>



<div class="viewcode-block" id="Plotting.FormatSetsOfFits"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.FormatSetsOfFits">[docs]</a>    <span class="k">def</span> <span class="nf">FormatSetsOfFits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">col_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;fit&#39;</span> <span class="ow">in</span> <span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="s1">&#39;fit_class&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_data</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;fit_class not present even though fit was selected!&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="n">sff</span><span class="o">.</span><span class="n">SetOfFitFuns</span><span class="p">):</span>
                    <span class="k">pass</span>
                    <span class="c1"># col_data[&#39;fit_class&#39;] = col_data[&#39;fit_class&#39;].Fit_Stats_fmt[&#39;Fit&#39;]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">sff</span><span class="o">.</span><span class="n">SetOfFitFuns</span><span class="p">):</span>
                    <span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sff</span><span class="o">.</span><span class="n">PullSOFSeries</span><span class="p">(</span><span class="n">col_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    <span class="c1"># def ScaleY(self,this_plot_data):</span>
    <span class="c1">#     if &#39;scale&#39; in this_plot_data.keys():</span>
    <span class="c1">#         if this_plot_data[&#39;scale&#39;] == False:</span>
    <span class="c1">#             this_plot_data[&#39;scale&#39;] = 1.0</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             if &#39;y_data&#39; in this_plot_data.keys():</span>
    <span class="c1">#                 this_plot_data[&#39;y_data&#39;] = np.array(this_plot_data[&#39;y_data&#39;])*this_plot_data[&#39;scale&#39;]</span>
    <span class="c1">#             if &#39;yerr_data&#39; in this_plot_data.keys():</span>
    <span class="c1">#                 this_yerrdata = np.array(this_yerrdata)*this_plot_data[&#39;scale&#39;]</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         this_plot_data[&#39;scale&#39;] = 1.0</span>
    <span class="c1">#     return this_plot_data</span>

<div class="viewcode-block" id="Plotting.XRange_Chop"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.XRange_Chop">[docs]</a>    <span class="k">def</span> <span class="nf">XRange_Chop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">,</span><span class="n">xdim_list</span><span class="p">,</span><span class="o">*</span><span class="n">data</span><span class="p">):</span>
        <span class="c1"># if &#39;x_range_max&#39; not in this_plot_data.keys():</span>
        <span class="c1">#     this_plot_data[&#39;x_range_max&#39;] = -1</span>
        <span class="c1"># if &#39;x_range_min&#39; not in this_plot_data.keys():</span>
        <span class="c1">#     this_plot_data[&#39;x_range_min&#39;] = 0</span>
        <span class="c1"># if &#39;x_increment&#39; not in this_plot_data.keys():</span>
        <span class="c1">#     this_plot_data[&#39;x_increment&#39;] = 1</span>
        <span class="n">x_max</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_range_max&#39;</span><span class="p">]</span>
        <span class="n">x_min</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_range_min&#39;</span><span class="p">]</span>
        <span class="n">x_inc</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_increment&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">x_max</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_max</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
            <span class="n">x_max</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">x_min</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
            <span class="n">x_min</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># elif x_max &lt;= x_min:</span>
        <span class="c1">#     x_max = x_min + 1</span>
        <span class="k">if</span> <span class="n">x_inc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_inc</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
            <span class="n">x_inc</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">x_inc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">x_inc</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">data_out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idim</span><span class="p">,</span><span class="n">idata</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">idim</span> <span class="ow">in</span> <span class="n">xdim_list</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">this_scale</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_scale</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">x_max</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_max</span><span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">idata</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">x_min</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x_min</span> <span class="o">=</span> <span class="n">x_min</span><span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">idata</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">data_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">idata</span><span class="p">)[</span><span class="n">x_min</span><span class="p">:</span><span class="n">x_max</span><span class="p">:</span><span class="n">x_inc</span><span class="p">]</span><span class="o">*</span><span class="n">this_scale</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">idata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">data_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idata</span><span class="o">*</span><span class="n">this_scale</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data_out</span></div>

<div class="viewcode-block" id="Plotting.PlotElement"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.PlotElement">[docs]</a>    <span class="k">def</span> <span class="nf">PlotElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">,</span><span class="n">no_key_formatting</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;plot_this&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="c1"># this_plot_data = self.ScaleY(this_plot_data)</span>
        <span class="n">is_vary</span> <span class="o">=</span> <span class="s1">&#39;_vary&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">is_vary</span> <span class="ow">and</span> <span class="s1">&#39;key_select&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;key_select needs to be set when calling _vary&#39;</span><span class="p">)</span>
        <span class="n">med_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">tupley_err</span><span class="p">,</span><span class="n">tuplex_err</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="kc">False</span>
        <span class="n">this_ydata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="kc">None</span>
        <span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="kc">None</span>
        <span class="k">if</span> <span class="s1">&#39;Median&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;Median&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;y_data_median&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">med_leg</span> <span class="o">=</span> <span class="s1">&#39;Medy&#39;</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;y_data_median&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s1">&#39;y_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;yerr_data_up&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="s1">&#39;yerr_data_down&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">yerr_bool</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_up&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_up&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
                <span class="n">yerr_bool</span> <span class="o">=</span> <span class="n">yerr_bool</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_down&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_down&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">yerr_bool</span><span class="p">:</span>
                    <span class="n">tupley_err</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_up&#39;</span><span class="p">],</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_down&#39;</span><span class="p">])),</span><span class="n">index</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data_up&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                <span class="k">elif</span> <span class="s1">&#39;yerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s1">&#39;yerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;x_data_median&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">med_leg</span> <span class="o">=</span> <span class="s1">&#39;Med&#39;</span><span class="o">+</span><span class="n">med_leg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Med&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;x&#39;</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_data_median&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s1">&#39;x_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;xerr_data_up&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="s1">&#39;xerr_data_down&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">xerr_bool</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_up&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_up&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
                <span class="n">xerr_bool</span> <span class="o">=</span> <span class="n">xerr_bool</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_down&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_down&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">xerr_bool</span><span class="p">:</span>
                    <span class="n">tuplex_err</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_up&#39;</span><span class="p">],</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_down&#39;</span><span class="p">])),</span><span class="n">index</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data_up&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;xerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span>
                <span class="n">xerr_bool</span> <span class="o">=</span> <span class="n">this_xerrdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="nb">bool</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xerr_bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;y_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;yerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;x_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;xerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span>
                <span class="n">xerr_bool</span> <span class="o">=</span> <span class="n">this_xerrdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="nb">bool</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xerr_bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;fit_class&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="n">sff</span><span class="o">.</span><span class="n">SetOfFitFuns</span><span class="p">):</span>
                <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">this_fit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;boot_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
            <span class="n">this_boot</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;boot_data&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_boot</span><span class="p">,</span><span class="n">sff</span><span class="o">.</span><span class="n">SetOfFitFuns</span><span class="p">):</span>
                <span class="n">this_boot</span> <span class="o">=</span> <span class="n">this_boot</span><span class="o">.</span><span class="n">Get_Extrapolation</span><span class="p">(</span><span class="n">fmted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">this_boot</span> <span class="o">=</span> <span class="kc">False</span>


        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;key_select&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">no_key_formatting</span><span class="p">:</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">tuple_wrap</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatKeySelect</span><span class="p">(</span><span class="n">tuple_wrap</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]),</span>
                                                                <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_boot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_boot</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatSeriesKeys</span><span class="p">(</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_fit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatSeriesKeys</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatSeriesKeys</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatSeriesKeys</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_xerrdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatSeriesKeys</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_yerrdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FormatSeriesKeys</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;key_select&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">tuple_wrap</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_key_select</span> <span class="o">=</span> <span class="s1">&#39;First&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">med_leg</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">med_leg</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s1">&#39;error_band&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="c1"># if len(this_xdata) == 0: return -1</span>
            <span class="c1">#TODO implement median for xdata too</span>

            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                <span class="n">output_dict</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">index</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                    <span class="n">hold_x</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">))):</span>
                            <span class="n">hold_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">hold_x</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="n">out_str</span> <span class="o">=</span> <span class="s1">&#39;key_select is incorrect</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="n">out_str</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">out_str</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">slice_loc</span> <span class="o">=</span> <span class="n">this_key_select</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                            <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="n">slice_loc</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, xdata and ydata are different length, manually cutting&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">xerr_bool</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">],</span><span class="nb">str</span><span class="p">):</span>
                    <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">tupley_err</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_yerrdata</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">](</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="n">out_str</span> <span class="o">=</span> <span class="s1">&#39;Shift cannot be added to this_xdata</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">out_str</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]))</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]))</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">out_str</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_xdata</span> <span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;: </span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">:</span>
                        <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">out_str</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">Shift_Duplicates</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_shiftper</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift_overlap&#39;</span><span class="p">]))</span>
                <span class="n">yup</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="n">ydown</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">this_ydata</span><span class="p">,</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">yup</span><span class="p">,</span>
                                            <span class="n">ydown</span><span class="p">,</span>
                                            <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
                                            <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>


        <span class="k">if</span> <span class="s1">&#39;arrow&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">this_ydata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">text_loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">this_ydata</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_color&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;darkblue&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_style&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;simple&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_text_size&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_text_size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="n">text_loc</span><span class="p">,</span>
                    <span class="n">arrowprops</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;arrowstyle&#39;</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_style&#39;</span><span class="p">],</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_color&#39;</span><span class="p">]},</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_text_size&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]),</span> <span class="n">xy</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="n">text_loc</span><span class="p">,</span>
                    <span class="n">arrowprops</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;arrowstyle&#39;</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_style&#39;</span><span class="p">],</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_color&#39;</span><span class="p">]},</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;arrow_text_size&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s1">&#39;vertical_comp&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="c1"># if len(this_xdata) == 0: return -1</span>
            <span class="c1">#TODO implement median for xdata too</span>

            <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">tuplex_err</span><span class="p">:</span>
                <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_xerrdata</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">](</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># this_boot,this_ydata,this_xdata,this_xerrdata,this_yerrdata = self.XRange_Chop(this_plot_data,[3,4],this_boot,this_ydata,this_xdata,this_xerrdata,this_yerrdata)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">)))</span>
            <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">)))</span>
            <span class="n">this_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">))</span>
            <span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_y</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;mirror_vert&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;mirror_vert&#39;</span><span class="p">]:</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">this_xerrdata</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;flip_vert&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;flip_vert&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>   <span class="n">this_y</span><span class="o">+</span><span class="mi">10</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">),</span>
                                            <span class="n">yerr</span><span class="o">=</span><span class="n">this_xerrdata</span><span class="p">,</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">fmt</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">),</span>
                                            <span class="n">this_y</span><span class="o">+</span><span class="mi">10</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">xerr</span><span class="o">=</span><span class="n">this_xerrdata</span><span class="p">,</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">fmt</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;do_band&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">],</span><span class="nb">int</span><span class="p">)</span> \
            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_index</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">),</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]),</span><span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">band_x</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="n">this_index</span><span class="p">]</span>
                <span class="n">band_xerr</span> <span class="o">=</span> <span class="n">this_xerrdata</span><span class="p">[</span><span class="n">this_index</span><span class="p">]</span>
                <span class="n">band_xup</span> <span class="o">=</span> <span class="n">band_x</span><span class="o">+</span><span class="n">band_xerr</span>
                <span class="n">band_xdown</span> <span class="o">=</span> <span class="n">band_x</span><span class="o">-</span><span class="n">band_xerr</span>
                <span class="k">if</span> <span class="s1">&#39;show_band_eval&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;show_band_eval&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;show_band_eval&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span>
                    <span class="n">band_leg</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$&#39;</span><span class="o">+</span><span class="n">MakeValAndErr</span><span class="p">(</span><span class="n">band_x</span><span class="p">,</span><span class="n">band_xerr</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Dec</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39;$&#39;</span>
                    <span class="k">if</span> <span class="s1">&#39;FPName&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;FPName&#39;</span><span class="p">],</span><span class="nb">str</span><span class="p">):</span>
                        <span class="n">band_leg</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;FPName&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band_leg</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s1">&#39;FPUnits&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;FPUnits&#39;</span><span class="p">],</span><span class="nb">str</span><span class="p">):</span>
                        <span class="n">band_leg</span> <span class="o">=</span> <span class="n">band_leg</span> <span class="o">+</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;FPUnits&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">band_leg</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="s1">&#39;flip_vert&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;flip_vert&#39;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span>    <span class="n">band_x</span><span class="p">,</span>
                                                <span class="n">label</span><span class="o">=</span><span class="n">band_leg</span><span class="p">,</span>
                                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span>    <span class="n">band_xup</span><span class="p">,</span>
                                                <span class="n">band_xdown</span><span class="p">,</span>
                                                <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span>
                                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span>    <span class="n">band_x</span><span class="p">,</span>
                                                <span class="n">label</span><span class="o">=</span><span class="n">band_leg</span><span class="p">,</span>
                                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span>    <span class="n">band_xup</span><span class="p">,</span>
                                                <span class="n">band_xdown</span><span class="p">,</span>
                                                <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span>
                                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>

        <span class="k">elif</span> <span class="s1">&#39;error_bar&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="c1"># if len(this_xdata) == 0: return -1</span>
            <span class="c1">#TODO implement median for xdata too</span>

            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                <span class="n">output_dict</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">index</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                    <span class="n">hold_x</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">))):</span>
                            <span class="n">hold_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">))</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">hold_x</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="n">this_key_select</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">index</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">this_key_select</span> <span class="o">=</span> <span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;key not found, setting to first key&#39;</span><span class="p">,</span><span class="n">this_key_select</span><span class="p">)</span>
                        <span class="n">this_key_select</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">)</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                        <span class="c1"># out_str = &#39;key_select is incorrect\n&#39;</span>
                        <span class="c1"># out_str += str(this_key_select) + &#39;\n&#39;</span>
                        <span class="c1"># print(this_ydata.to_string())</span>
                        <span class="c1"># raise Exception(out_str + str(err))</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">slice_loc</span> <span class="o">=</span> <span class="n">this_key_select</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                            <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="n">slice_loc</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, xdata and ydata are different length, manually cutting&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">xerr_bool</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;_vary&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;from_keys for x_data cannot be used with xerr_data included&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">this_xerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                <span class="c1"># print this_plot_data[&#39;label&#39;]</span>
                <span class="c1"># print this_xdata</span>
                <span class="c1"># print float(this_plot_data[&#39;shift&#39;])</span>
                <span class="c1"># print np.array(this_xdata)+float(this_plot_data[&#39;shift&#39;])</span>
                <span class="c1"># print this_xerrdata</span>
                <span class="k">if</span> <span class="n">tuplex_err</span><span class="p">:</span>
                    <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_xerrdata</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">tupley_err</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_yerrdata</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">](</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">if</span> <span class="s1">&#39;abs&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;plot_err&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">this_yerrdata</span><span class="p">,</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">marker</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="k">elif</span> <span class="s1">&#39;rel&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;plot_err&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="o">/</span><span class="n">this_ydata</span><span class="p">),</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">marker</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">Shift_Duplicates</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_shiftper</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift_overlap&#39;</span><span class="p">]))</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">)))</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">)))</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)))</span>
                    <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">)))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                                <span class="n">this_ydata</span><span class="p">,</span>
                                                <span class="n">yerr</span><span class="o">=</span><span class="n">this_yerrdata</span><span class="p">,</span>
                                                <span class="n">xerr</span><span class="o">=</span><span class="n">this_xerrdata</span><span class="p">,</span>
                                                <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                                <span class="n">fmt</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">],</span><span class="nb">str</span><span class="p">):</span>
                    <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">tupley_err</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span> <span class="k">for</span> <span class="n">ival</span> <span class="ow">in</span> <span class="n">this_yerrdata</span><span class="o">.</span><span class="n">values</span><span class="p">])</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">index</span><span class="p">)))</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="n">out_str</span> <span class="o">=</span> <span class="s1">&#39;Shift cannot be added to this_xdata</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">out_str</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]))</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]))</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">out_str</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_xdata</span> <span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;: </span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">:</span>
                        <span class="n">out_str</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">out_str</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">](</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;abs&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;plot_err&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">this_yerrdata</span><span class="p">,</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">marker</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="k">elif</span> <span class="s1">&#39;rel&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;plot_err&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="o">/</span><span class="n">this_ydata</span><span class="p">),</span>
                                            <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                            <span class="n">marker</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">Shift_Duplicates</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_shiftper</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift_overlap&#39;</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">):</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                                <span class="n">this_ydata</span><span class="p">,</span>
                                                <span class="n">yerr</span><span class="o">=</span><span class="n">this_yerrdata</span><span class="p">,</span>
                                                <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                                <span class="n">fmt</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s1">&#39;plot&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)))</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">)</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="n">slice_loc</span> <span class="o">=</span> <span class="n">this_key_select</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="n">slice_loc</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                        <span class="n">this_ydata</span><span class="p">,</span>
                                        <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                        <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s1">&#39;histogram&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;boot_data&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_plot_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_boot</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                                <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                        <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                    <span class="k">if</span> <span class="s1">&#39;First&#39;</span> <span class="o">==</span> <span class="n">this_key_select</span><span class="p">:</span>
                        <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">this_boot</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                    <span class="c1"># if hasattr(this_plot_data[&#39;fmt_class&#39;],&#39;FormatSeriesKeys&#39;):</span>
                    <span class="c1">#     this_boot = this_plot_data[&#39;fmt_class&#39;].FormatSeriesKeys(this_boot,</span>
                    <span class="c1">#                                                                 this_plot_data[&#39;phys_axies&#39;])</span>
                    <span class="n">this_boot</span> <span class="o">=</span> <span class="n">this_boot</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_boot</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">this_boot</span> <span class="o">=</span> <span class="n">this_boot</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="c1"># if isinstance(this_plot_data,pa.DataFrame):</span>
                <span class="c1">#     this_plot_data = this_plot_data.iloc[0,0]</span>
                <span class="c1"># if isinstance(this_plot_data,pa.Series):</span>
                <span class="c1">#     this_plot_data = this_plot_data.iloc[0]</span>
                <span class="c1"># if isinstance(this_plot_data,pa.Series):</span>
                <span class="c1">#     this_plot_data = this_plot_data.iloc[0]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_boot</span><span class="p">,</span><span class="n">BootStrap</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]),</span> <span class="s1">&#39;is not bootstrap class&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">this_boot</span><span class="p">)</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">this_boot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_boot</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span> <span class="o">=</span> <span class="n">this_boot</span><span class="o">.</span><span class="n">BootHistogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="p">,</span>
                                    <span class="n">histtype</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;histtype&#39;</span><span class="p">],</span>
                                    <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                    <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                                    <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span>
                                    <span class="n">Median</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;Median&#39;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                                <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                        <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">](</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">),</span>
                                        <span class="n">histtype</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;histtype&#39;</span><span class="p">],</span>
                                        <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                        <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                                        <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s1">&#39;scatter&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">)</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="n">slice_loc</span> <span class="o">=</span> <span class="n">this_key_select</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="n">slice_loc</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">](</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">this_boot</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                        <span class="n">this_ydata</span><span class="p">,</span>
                                        <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                        <span class="n">marker</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span>
                                        <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s1">&#39;vline&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>  <span class="n">this_xdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="s1">&#39;ACTUAL_VALUE_&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]:</span>
                <span class="n">prefix</span><span class="p">,</span><span class="n">value</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;ACTUAL_VALUE_&#39;</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">+=</span> <span class="s1">&#39;=&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;xerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_xerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_xerrdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_xerrdata</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">err</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">prefix</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39; $&#39;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="n">MakeValAndErr</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">err</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39;$&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">prefix</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39; $&#39;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="n">MakeVal</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">Dec</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39;$&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">this_xdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">0</span><span class="p">],</span><span class="n">this_xdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span>    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                        <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                        <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;xerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="n">mid</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">err</span> <span class="o">=</span> <span class="n">this_xerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">mid</span><span class="p">,</span><span class="n">err</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">this_xerrdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">mid</span><span class="p">,</span><span class="n">err</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">err</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">up</span><span class="p">,</span><span class="n">down</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="n">err</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">mid</span><span class="o">-</span><span class="n">err</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">up</span><span class="p">,</span><span class="n">down</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="n">err</span><span class="p">,</span><span class="n">mid</span><span class="o">-</span><span class="n">err</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">down</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">down</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">up</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="n">up</span><span class="p">,</span><span class="n">down</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">XRange_Chop</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">up</span><span class="p">,</span><span class="n">down</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span>    <span class="n">down</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">up</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]),</span>
                                            <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>

        <span class="k">elif</span> <span class="s1">&#39;hline&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">ikey</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">this_leg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ikey</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">this_leg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
                <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Fix_Key_Select</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">)</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;ACTUAL_VALUE_&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]:</span>
                <span class="n">prefix</span><span class="p">,</span><span class="n">value</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;ACTUAL_VALUE_&#39;</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">+=</span> <span class="s1">&#39;=&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;yerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                            <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">err</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                    <span class="n">this_leg</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">prefix</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39; $&#39;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="n">MakeValAndErr</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">err</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39;$&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_leg</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">prefix</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39; $&#39;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="n">MakeVal</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">Dec</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39;$&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">]:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">this_leg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_leg</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">]:</span> <span class="n">this_leg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># this_ydata = self.XRange_Chop(this_plot_data,this_ydata)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span>    <span class="n">this_ydata</span><span class="p">,</span>
                                        <span class="n">label</span><span class="o">=</span><span class="n">this_leg</span><span class="p">,</span>
                                        <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;yerr_data&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">err</span> <span class="o">=</span> <span class="n">this_yerrdata</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">err</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">up</span><span class="p">,</span><span class="n">down</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">+</span><span class="n">err</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">this_ydata</span><span class="o">-</span><span class="n">err</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">up</span><span class="p">,</span><span class="n">down</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">err</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">err</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">up</span><span class="p">,</span><span class="n">down</span> <span class="o">=</span> <span class="n">this_ydata</span><span class="o">+</span><span class="n">err</span><span class="p">,</span><span class="n">this_ydata</span><span class="o">-</span><span class="n">err</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">down</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">down</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">up</span><span class="p">)</span><span class="o">*</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="c1"># up,down = self.XRange_Chop(this_plot_data,up,down)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span>    <span class="n">down</span><span class="p">,</span>
                                            <span class="n">up</span><span class="p">,</span>
                                            <span class="n">alpha</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span>
                                            <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s1">&#39;effm_fit&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;xdatarange&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xdatarange&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Data&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;thislineres&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;thislineres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
            <span class="k">if</span> <span class="s1">&#39;Phys&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;Phys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="c1"># if this_key_select not in list(this_fit.index):</span>
                <span class="c1">#     this_key_select = this_fit.index[0]</span>
                <span class="c1"># this_key_select = Fix_Key_Select(this_key_select,this_fit)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="n">this_key_select</span><span class="p">,</span><span class="n">this_fit</span> <span class="o">=</span> <span class="n">Fix_Se_Keys</span><span class="p">(</span><span class="n">this_key_select</span><span class="p">,</span><span class="n">this_fit</span><span class="p">)</span>
                    <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">def</span> <span class="nf">this_scale</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FmtTime</span><span class="p">(</span><span class="n">val</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_scale</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">PlotEffMass</span><span class="p">(</span>
                                <span class="n">xdatarange</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xdatarange&#39;</span><span class="p">],</span>
                                <span class="n">thislineres</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;thislineres&#39;</span><span class="p">],</span>
                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                                <span class="n">shift</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">],</span>
                                <span class="n">Phys</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;Phys&#39;</span><span class="p">],</span>
                                <span class="n">y_scale</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span>
                                <span class="n">x_scale</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">],</span>
                                <span class="n">plot_plane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;log_fit&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;xdatarange&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xdatarange&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Data&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;thislineres&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;thislineres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">PlotLog</span><span class="p">(</span>
                                <span class="n">xdatarange</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xdatarange&#39;</span><span class="p">],</span>
                                <span class="n">thislineres</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;thislineres&#39;</span><span class="p">],</span>
                                <span class="n">scale</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span>
                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                                <span class="n">shift</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">],</span>
                                <span class="n">plot_plane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;fit&#39;</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;otherXvals&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;otherXvals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="s1">&#39;xaxis&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="s1">&#39;xdatarange&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xdatarange&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Data&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;thislineres&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;thislineres&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
            <span class="k">if</span> <span class="s1">&#39;flowphys&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;flowphys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="s1">&#39;ShowPar&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowPar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;ShowEval&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_plot_data</span><span class="p">:</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowEval&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;wrong data type for _vary&#39;</span><span class="p">)</span>
                <span class="n">this_key</span> <span class="o">=</span> <span class="n">this_key_select</span>
                <span class="k">if</span> <span class="n">this_key</span> <span class="ow">in</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                    <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="p">[</span><span class="n">this_key</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_fit</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;First&#39;</span> <span class="o">!=</span> <span class="n">this_key</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, &#39;</span><span class="p">,</span><span class="n">this_key</span><span class="p">,</span> <span class="s1">&#39;not in fit plot keys&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fit varied was not passed with anything to vary, skipping plot&#39;</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">output_dict</span>
                    <span class="n">this_fit</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">def</span> <span class="nf">this_scale</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;fmt_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">FmtTime</span><span class="p">(</span><span class="n">val</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;phys_axies&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_scale</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span>
            <span class="n">this_fit</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">med_leg</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">LegendFmt</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowEval&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowEval&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">],</span><span class="nb">int</span><span class="p">):</span>
                    <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowEval&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;otherXvals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">ix</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowEval&#39;</span><span class="p">])</span> <span class="k">if</span> <span class="n">ix</span> <span class="o">!=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">],(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_dropoff</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_alpha</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_dropoff</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">]</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_alpha</span> <span class="o">=</span> <span class="mf">1.0</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">],(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_dropoff</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_alpha</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_dropoff</span> <span class="o">=</span> <span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hair_alpha&#39;</span><span class="p">]</span>
                <span class="n">this_fit</span><span class="o">.</span><span class="n">hairline_alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="n">this_fit</span><span class="o">.</span><span class="n">FPName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;FPName&#39;</span><span class="p">])</span>
            <span class="n">this_fit</span><span class="o">.</span><span class="n">FPUnits</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;FPUnits&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">PlotFunction</span><span class="p">(</span>
                                <span class="n">otherXvals</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;otherXvals&#39;</span><span class="p">],</span>
                                <span class="n">xaxis</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">],</span>
                                <span class="n">xdatarange</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;xdatarange&#39;</span><span class="p">],</span>
                                <span class="n">thislineres</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;thislineres&#39;</span><span class="p">],</span>
                                <span class="n">color</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                                <span class="n">shift</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">],</span>
                                <span class="n">flowphys</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;flowphys&#39;</span><span class="p">],</span>
                                <span class="n">ShowPar</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowPar&#39;</span><span class="p">],</span>
                                <span class="n">ShowEval</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;ShowEval&#39;</span><span class="p">],</span>
                                <span class="n">y_scale</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span>
                                <span class="n">x_scale</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">],</span>
                                <span class="n">suppress_key</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;suppress_key_index&#39;</span><span class="p">],</span>
                                <span class="n">x_fun</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;x_fun&#39;</span><span class="p">],</span>
                                <span class="n">supress_legend</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;supress_legend&#39;</span><span class="p">],</span>
                                <span class="n">hairline</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;hairline&#39;</span><span class="p">],</span>
                                <span class="n">extrap_fade</span><span class="o">=</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;extrap_fade&#39;</span><span class="p">],</span>
                                <span class="n">plot_plane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, plpython kill programot type&#39;</span><span class="p">,</span><span class="n">this_plot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span><span class="s1">&#39;not implemented, skipping data&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output_dict</span></div>

<div class="viewcode-block" id="Plotting.Animate"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.Animate">[docs]</a>    <span class="k">def</span> <span class="nf">Animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">this_key</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">a_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">multi_index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddNulls</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_key</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
            <span class="n">this_pd</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">this_pd</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">this_key</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_key</span>
        <span class="k">if</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colourset8</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">markerset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shiftset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;_vary&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;animating something must be _vary type of plot&#39;</span><span class="p">)</span>
        <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fmt_Qt5_col</span><span class="p">(</span><span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
        <span class="n">all_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PlotElement</span><span class="p">(</span><span class="n">this_pd</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">all_keys</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;error ploting for animate&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;First&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s1">&#39;Animation not working for First atm&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">a_index</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a_index&#39;</span><span class="p">,</span><span class="n">a_index</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;keys&#39;</span><span class="p">,</span><span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;dimensions is smaller than index to animate over&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">][</span><span class="n">a_index</span><span class="p">],</span><span class="nb">slice</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">a_index</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;cannot animate over dimension that is being plotted&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_index</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">a_index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_keys</span><span class="o">.</span><span class="n">names</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">a_index</span><span class="p">)</span>
        <span class="n">animate_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">all_keys</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="n">a_index</span><span class="p">)))</span>
        <span class="c1"># for ia_key in list(OrderedDict.fromkeys(animate_keys)):</span>
        <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
        <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">][</span><span class="n">a_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">animate_keys</span><span class="p">[</span><span class="n">multi_index</span><span class="p">]</span>
        <span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">this_pd</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PlotElement</span><span class="p">(</span><span class="n">this_pd</span><span class="p">,</span><span class="n">no_key_formatting</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Configure_Plane</span><span class="p">()</span>
        <span class="n">internal_dir</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">mkdir_p</span><span class="p">(</span><span class="n">internal_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.pdf&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.pdf&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">WriteData</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">multi_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">animate_keys</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">multi_index</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="Plotting.Configure_Plane"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.Configure_Plane">[docs]</a>    <span class="k">def</span> <span class="nf">Configure_Plane</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_fontsize&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span> <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_loc&#39;</span><span class="p">],</span><span class="n">ncol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_ncol&#39;</span><span class="p">],</span>
                                    <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_fontsize&#39;</span><span class="p">],</span><span class="n">framealpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;leg_alpha&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;title&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;title_dict&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;title_pad&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>  <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
                                                    <span class="n">fontdict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title_dict&#39;</span><span class="p">],</span>
                                                    <span class="n">pad</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title_pad&#39;</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>  <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
                                                    <span class="n">fontdict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title_dict&#39;</span><span class="p">]</span>
                                                    <span class="p">,</span><span class="n">pad</span><span class="o">=</span><span class="n">tpad</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>  <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
                                                <span class="n">fontdict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title_dict&#39;</span><span class="p">])</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;title_pad&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span><span class="n">pad</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title_pad&#39;</span><span class="p">])</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],{</span><span class="s1">&#39;fontsize&#39;</span><span class="p">:</span><span class="n">tsize</span><span class="p">})</span>
        <span class="k">if</span> <span class="s1">&#39;xlabel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;xlabel_dict&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlabel_dict&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">],{</span><span class="s1">&#39;fontsize&#39;</span><span class="p">:</span><span class="n">xsize</span><span class="p">})</span>
        <span class="k">if</span> <span class="s1">&#39;ylabel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;ylabel_dict&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylabel_dict&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">],{</span><span class="s1">&#39;fontsize&#39;</span><span class="p">:</span><span class="n">ysize</span><span class="p">})</span>
        <span class="k">if</span> <span class="s1">&#39;x_plot_scale&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;x_plot_scale&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;x_plot_scale&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;y_plot_scale&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;y_plot_scale&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;y_plot_scale&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;xlims&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlims&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;ylims&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylims&#39;</span><span class="p">])</span>

        <span class="n">do_x</span> <span class="o">=</span> <span class="s1">&#39;do_xTicks&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;do_xTicks&#39;</span><span class="p">]</span>
        <span class="n">do_y</span> <span class="o">=</span> <span class="s1">&#39;do_yTicks&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;do_yTicks&#39;</span><span class="p">]</span>
        <span class="n">do_custom</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;custom_yTicks&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span>
                      <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;custom_yTicks&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)))</span>
        <span class="k">if</span> <span class="s1">&#39;custom_yTicks&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="n">this_tick_labs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;custom_yTicks&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">this_tick_labs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">do_custom</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;mirror_vert&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;mirror_vert&#39;</span><span class="p">]:</span>
                <span class="n">this_tick_labs</span> <span class="o">=</span> <span class="n">this_tick_labs</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;flip_vert&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;flip_vert&#39;</span><span class="p">]:</span>
                <span class="n">do_x</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">do_y</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">do_x</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">do_custom</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">this_tick_labs</span><span class="p">)))</span>
                <span class="k">if</span> <span class="s1">&#39;xlabel_dict&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="s1">&#39;fontsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlabel_dict&#39;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">this_tick_labs</span><span class="p">,</span>
                                                    <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xlabel_dict&#39;</span><span class="p">][</span><span class="s1">&#39;fontsize&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">this_tick_labs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xTick_min&#39;</span><span class="p">],</span>
                                                     <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xTick_max&#39;</span><span class="p">],</span>
                                                     <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;xTick_inc&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">do_y</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">do_custom</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">this_tick_labs</span><span class="p">)))</span>
                <span class="k">if</span> <span class="s1">&#39;ylabel_dict&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="s1">&#39;fontsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylabel_dict&#39;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">this_tick_labs</span><span class="p">,</span>
                                                    <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;ylabel_dict&#39;</span><span class="p">][</span><span class="s1">&#39;fontsize&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">this_tick_labs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span>   <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;yTick_min&#39;</span><span class="p">],</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;yTick_max&#39;</span><span class="p">],</span>
                                                        <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;yTick_inc&#39;</span><span class="p">]))</span></div>



<div class="viewcode-block" id="Plotting.PlotAll"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.PlotAll">[docs]</a>    <span class="k">def</span> <span class="nf">PlotAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddNulls</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="n">errlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">icplot</span><span class="p">,(</span><span class="n">ikey</span><span class="p">,</span><span class="n">iplot</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">holdcol</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colcyc</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colcyc</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">colourset8</span><span class="p">)</span>
                    <span class="n">holdcol</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colcyc</span><span class="p">)</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">holdcol</span>
            <span class="k">elif</span> <span class="s1">&#39;previous&#39;</span> <span class="o">==</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]:</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">holdcol</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">ikey</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fmt_Qt5_col</span><span class="p">(</span><span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
                <span class="n">holdcol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">[</span><span class="n">ikey</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">holdsym</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symcyc</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">symcyc</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">markerset</span><span class="p">)</span>
                    <span class="n">holdsym</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symcyc</span><span class="p">)</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">holdsym</span>
            <span class="k">elif</span> <span class="s1">&#39;previous&#39;</span> <span class="ow">in</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]:</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">holdsym</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">holdsym</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">holdshift</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shiftcyc</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">shiftcyc</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">shiftset</span><span class="p">)</span>
                    <span class="n">holdshift</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shiftcyc</span><span class="p">)</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">holdshift</span>
            <span class="k">elif</span> <span class="s1">&#39;previous&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">])</span> <span class="p">:</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">holdshift</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">holdshift</span> <span class="o">=</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>  <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">):</span>
                <span class="n">iplot</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ikey</span>
            <span class="n">this_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PlotElement</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">iplot</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_out</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
                <span class="n">this_out</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">errlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_out</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">errlist</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nothing to plot&#39;</span><span class="p">)</span>
            <span class="c1"># return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Configure_Plane</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;x_zero_line&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;x_zero_line&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;x_zero_line_val&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PlotLine</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;x_zero_line_val&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PlotLine</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;y_zero_line&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;y_zero_line&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;y_zero_line_val&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PlotLine</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;y_zero_line_val&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PlotLine</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># pl.xlim(*defxlim)</span>
        <span class="k">if</span> <span class="s1">&#39;save_file&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">:</span>
            <span class="n">internal_dir</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">mkdir_p</span><span class="p">(</span><span class="n">internal_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.pdf&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.pdf&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">WriteData</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;show_figure&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;show_figure&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>
            <span class="c1"># pl.show()</span>
        <span class="c1"># self.ClearFigure()</span>

<div class="viewcode-block" id="Plotting.PlotLine"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.PlotLine">[docs]</a>    <span class="k">def</span> <span class="nf">PlotLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">axis</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">axis</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;y&#39;</span> <span class="ow">in</span> <span class="n">axis</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Plotting.get_xlim"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.get_xlim">[docs]</a>    <span class="k">def</span> <span class="nf">get_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span></div>
    <span class="c1">#     data = np.array(self.plot_data.loc[&#39;x_data&#39;].values).flatten()</span>
    <span class="c1">#     print &#39;DEBUG&#39;,data</span>
    <span class="c1">#     print &#39;DEBUG2&#39;,[np.min(data),np.max(data)]</span>
    <span class="c1">#     return [np.min(data),np.max(data)]</span>
    <span class="c1">#     # return self.plot_plane.get_xlim()</span>
    <span class="c1">#</span>
<div class="viewcode-block" id="Plotting.get_ylim"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.get_ylim">[docs]</a>    <span class="k">def</span> <span class="nf">get_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span></div>
    <span class="c1">#     data = np.array(self.plot_data.loc[&#39;y_data&#39;].values).flatten()</span>
    <span class="c1">#     return [np.min(data),np.max(data)]</span>
    <span class="c1">#     # return self.plot_plane.get_ylim()</span>

<div class="viewcode-block" id="Plotting.close_fig"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.close_fig">[docs]</a>    <span class="k">def</span> <span class="nf">close_fig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plotting.WriteData"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.WriteData">[docs]</a>    <span class="k">def</span> <span class="nf">WriteData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">outDict</span> <span class="o">=</span> <span class="n">ODNested</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;window_size&#39;</span><span class="p">):</span>
            <span class="n">outDict</span><span class="p">[</span><span class="s1">&#39;window_size_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">outDict</span><span class="p">[</span><span class="s1">&#39;window_size_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">outDict</span><span class="p">[</span><span class="s1">&#39;Info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Series_TO_ODict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">iplot_key</span><span class="p">,</span><span class="n">iplot_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">is_vary</span> <span class="o">=</span> <span class="s1">&#39;_vary&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
            <span class="n">key_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">iplot_key</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">idata</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">dict_key</span> <span class="o">=</span> <span class="n">ikey</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ikey</span> <span class="o">==</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span>
                    <span class="n">idata</span> <span class="o">=</span> <span class="n">fmt_Qt5_col</span><span class="p">(</span><span class="n">idata</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;_data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ikey</span> <span class="ow">and</span> <span class="s1">&#39;key_select&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ikey</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">idata</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">):</span>
                        <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="n">dict_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">idata</span><span class="o">.</span><span class="n">name</span>
                    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">idata</span><span class="p">,</span><span class="s1">&#39;__name__&#39;</span><span class="p">):</span>
                        <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="n">dict_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">idata</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">idata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="n">dict_key</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="n">dict_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">idata</span>
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;plot&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;error_bar&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">or</span>
                <span class="s1">&#39;scatter&#39;</span> <span class="ow">in</span>  <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;error_band&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">or</span>
                <span class="s1">&#39;vertical_comp&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]):</span>
                <span class="k">if</span> <span class="s1">&#39;plot&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                    <span class="n">yerr_test</span><span class="p">,</span><span class="n">xerr_test</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;vertical_comp&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                        <span class="n">yerr_test</span> <span class="o">=</span> <span class="s1">&#39;yerr_data&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span> <span class="ow">and</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">yerr_test</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">xerr_test</span> <span class="o">=</span> <span class="s1">&#39;xerr_data&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span> <span class="ow">and</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                        <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">],</span><span class="nb">bool</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">ic</span><span class="p">,</span><span class="n">ikey</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]):</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ikey</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;key_select_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ic</span><span class="p">)]</span> <span class="o">=</span> <span class="n">ikey</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])]</span><span class="o">.</span><span class="n">values</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                        <span class="c1"># iindex = list(iplot_data[&#39;key_select&#39;]).index(slice(None))</span>
                        <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Un_Fix_Key_Select</span><span class="p">(</span><span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]))</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">slice_loc</span> <span class="o">=</span> <span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                                <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="n">slice_loc</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                            <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                            <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                            <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_val_float_0</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span>
                    <span class="n">this_key_select</span> <span class="o">=</span> <span class="n">Un_Fix_Key_Select</span><span class="p">(</span><span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]))</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                    <span class="k">if</span> <span class="n">yerr_test</span><span class="p">:</span>
                        <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key_select</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                    <span class="k">if</span> <span class="n">xerr_test</span><span class="p">:</span>
                        <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">yerr_test</span><span class="p">:</span>
                        <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">xerr_test</span><span class="p">:</span>
                        <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">this_xdata</span><span class="o">.</span><span class="n">values</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">this_xdata</span> <span class="o">==</span> <span class="s1">&#39;from_keys&#39;</span><span class="p">:</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">this_ydata</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="nb">tuple</span><span class="p">,</span><span class="nb">list</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                            <span class="n">this_xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">this_xdata</span><span class="p">]</span>
                        <span class="n">this_xdata</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_val_float_0</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">this_xdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">)</span><span class="o">*</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">xerr_test</span><span class="p">:</span>
                        <span class="n">this_xerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">)</span><span class="o">*</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">this_ydata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_ydata</span><span class="p">)</span><span class="o">*</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">yerr_test</span><span class="p">:</span>
                        <span class="n">this_yerrdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">this_yerrdata</span><span class="p">)</span><span class="o">*</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">yerr_test</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">xerr_test</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">ix</span><span class="p">,</span><span class="n">ixerr</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iyerr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>   <span class="n">this_xdata</span><span class="p">,</span><span class="n">this_xerrdata</span><span class="p">,</span>
                                                        <span class="n">this_ydata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">minfmt</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxfmt</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span>
                            <span class="k">else</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;e&#39;</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;data&#39;</span><span class="p">][(</span><span class="s1">&#39;x_{0:5.10&#39;</span><span class="o">+</span><span class="n">frmtflag</span><span class="o">+</span><span class="s1">&#39;} {1:5.10&#39;</span><span class="o">+</span><span class="n">frmtflag</span><span class="o">+</span><span class="s1">&#39;}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="n">ixerr</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">AvgStdToFormat</span><span class="p">(</span><span class="n">iy</span><span class="p">,</span><span class="n">iyerr</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iyerr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">,</span><span class="n">this_yerrdata</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">minfmt</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxfmt</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span>
                            <span class="k">else</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;e&#39;</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;data&#39;</span><span class="p">][(</span><span class="s1">&#39;x_{0:5.10&#39;</span><span class="o">+</span><span class="n">frmtflag</span><span class="o">+</span><span class="s1">&#39;}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">AvgStdToFormat</span><span class="p">(</span><span class="n">iy</span><span class="p">,</span><span class="n">iyerr</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;vertical_comp&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                        <span class="k">for</span> <span class="n">ixerr</span><span class="p">,</span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">this_xerrdata</span><span class="p">,</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">minfmt</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxfmt</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span>
                            <span class="k">else</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;e&#39;</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="n">iy</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:10.20e}</span><span class="s1"> </span><span class="si">{0:10.20e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="n">ixerr</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">ix</span><span class="p">,</span><span class="n">iy</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">this_xdata</span><span class="p">,</span><span class="n">this_ydata</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">minfmt</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxfmt</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span>
                            <span class="k">else</span><span class="p">:</span> <span class="n">frmtflag</span> <span class="o">=</span> <span class="s1">&#39;e&#39;</span>
                            <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;data&#39;</span><span class="p">][(</span><span class="s1">&#39;x_{0:5.10&#39;</span><span class="o">+</span><span class="n">frmtflag</span><span class="o">+</span><span class="s1">&#39;}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:10.20e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">iy</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;vline&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">plotval</span><span class="p">)(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">plotval</span><span class="p">)</span><span class="o">*</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;x_scale&#39;</span><span class="p">])</span>
                <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;vline_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:10.20e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plotval</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;hline&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plotval</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">plotval</span> <span class="o">=</span> <span class="n">plotval</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">plotval</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">plotval</span><span class="p">)(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">plotval</span><span class="p">)</span><span class="o">*</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">])</span>
                <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;hline_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:10.20e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plotval</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;fit&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="s1">&#39;fit_class&#39;</span> <span class="ow">in</span> <span class="n">iplot_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">],</span><span class="n">sff</span><span class="o">.</span><span class="n">SetOfFitFuns</span><span class="p">):</span>
                        <span class="n">this_fit</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">Fit_Stats_fmt</span><span class="p">[</span><span class="s1">&#39;Fit&#39;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">this_fit</span> <span class="o">=</span> <span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;fit_class&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_fit</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="n">is_vary</span><span class="p">:</span>
                    <span class="n">this_key</span> <span class="o">=</span> <span class="n">tuple_wrap</span><span class="p">(</span><span class="n">iplot_data</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">])</span>
                    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="nb">type</span><span class="p">(</span><span class="n">jkey</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span> <span class="k">for</span> <span class="n">jkey</span> <span class="ow">in</span> <span class="n">this_key</span><span class="p">]):</span>
                        <span class="n">this_key</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">this_key</span> <span class="ow">in</span> <span class="n">this_fit</span><span class="p">:</span>
                        <span class="n">this_plot</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">this_key</span><span class="p">]</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">this_plot</span><span class="p">,</span><span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                            <span class="n">this_plot</span> <span class="o">=</span> <span class="n">this_plot</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_fit</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fit varied was not passed with anything to vary, skipping write&#39;</span><span class="p">)</span>
                            <span class="k">return</span>
                        <span class="n">this_plot</span> <span class="o">=</span> <span class="n">this_fit</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">this_plot</span> <span class="o">=</span> <span class="n">this_fit</span>
                <span class="k">for</span> <span class="n">iparam</span><span class="p">,</span><span class="n">boot_param</span> <span class="ow">in</span> <span class="n">this_plot</span><span class="o">.</span><span class="n">fit_data</span><span class="p">[</span><span class="s1">&#39;Params&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;fit_parameters&#39;</span><span class="p">][</span><span class="n">iparam</span><span class="p">]</span> <span class="o">=</span> <span class="n">AvgStdToFormat</span><span class="p">(</span><span class="n">boot_param</span><span class="o">.</span><span class="n">Avg</span><span class="p">,</span><span class="n">boot_param</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;Chi2DoF&#39;</span> <span class="ow">in</span> <span class="n">this_plot</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">outDict</span><span class="p">[</span><span class="n">key_str</span><span class="p">][</span><span class="s1">&#39;chi^</span><span class="si">{2}</span><span class="s1">_</span><span class="si">{pdf}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">AvgStdToFormat</span><span class="p">(</span><span class="n">this_plot</span><span class="o">.</span><span class="n">fit_data</span><span class="p">[</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Avg</span><span class="p">,</span><span class="n">this_plot</span><span class="o">.</span><span class="n">fit_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;Chi2DoF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">Std</span><span class="p">)</span>
        <span class="n">WriteXml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">HumanFile</span><span class="p">,{</span><span class="s1">&#39;Results&#39;</span><span class="p">:</span><span class="n">outDict</span><span class="p">},</span><span class="n">Bak</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemoveFuns</span><span class="p">()</span>
        <span class="n">pickle_out</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ikey</span><span class="p">,</span><span class="n">ival</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ikey</span> <span class="o">!=</span> <span class="s1">&#39;figure&#39;</span> <span class="ow">and</span> <span class="n">ikey</span> <span class="o">!=</span> <span class="s1">&#39;plot_plane&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;plot_data&#39;</span> <span class="ow">in</span> <span class="n">ikey</span><span class="p">:</span>
                    <span class="n">pickle_out</span><span class="p">[</span><span class="n">ikey</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">jkey</span><span class="p">,</span><span class="n">jdata</span> <span class="ow">in</span> <span class="n">ival</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">pickle_out</span><span class="p">[</span><span class="n">ikey</span><span class="p">][</span><span class="n">jkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">jdata</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pickle_out</span><span class="p">[</span><span class="n">ikey</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">ival</span><span class="p">)</span>
        <span class="n">pickle_out</span><span class="p">[</span><span class="s1">&#39;colcyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pickle_out</span><span class="p">[</span><span class="s1">&#39;colcyc&#39;</span><span class="p">])</span>
        <span class="n">pickle_out</span><span class="p">[</span><span class="s1">&#39;symcyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pickle_out</span><span class="p">[</span><span class="s1">&#39;symcyc&#39;</span><span class="p">])</span>
        <span class="n">pickle_out</span><span class="p">[</span><span class="s1">&#39;shiftcyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pickle_out</span><span class="p">[</span><span class="s1">&#39;shiftcyc&#39;</span><span class="p">])</span>
        <span class="n">WritePickle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="p">,</span><span class="n">pickle_out</span><span class="p">,</span><span class="n">Bak</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span></div>

<div class="viewcode-block" id="Plotting.FixRead"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.FixRead">[docs]</a>    <span class="k">def</span> <span class="nf">FixRead</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">readdict</span><span class="p">):</span>
        <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;colcyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">colourset8</span><span class="p">)</span>
        <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;symcyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">markerset</span><span class="p">)</span>
        <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;shiftcyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">shiftset</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;save_file&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;plot_info&#39;</span><span class="p">][</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;show_figure&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;plot_info&#39;</span><span class="p">][</span><span class="s1">&#39;show_figure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="p">[</span><span class="s1">&#39;show_figure&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;HumanFile&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;HumanFile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HumanFile</span>
        <span class="k">if</span> <span class="s1">&#39;PickleFile&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_info</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;PickleFile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span>
        <span class="k">if</span> <span class="s1">&#39;plot_data&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">readdict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;plot_data&#39;</span><span class="p">],</span><span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;plot_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">readdict</span><span class="p">[</span><span class="s1">&#39;plot_data&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">readdict</span></div>

<div class="viewcode-block" id="Plotting.LoadPickle"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.LoadPickle">[docs]</a>    <span class="k">def</span> <span class="nf">LoadPickle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">DefWipe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ForceWindowSize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">force_py2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># print &#39;filename &#39; , self.PickleFile</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">DefWipe</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_py2</span><span class="p">:</span>
            <span class="c1"># print(&#39;Loading Pickle for &#39; , self.PickleFile)</span>
            <span class="n">loadeddict</span> <span class="o">=</span> <span class="n">ReadPickleWrap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="p">)</span>
            <span class="n">loadeddict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FixRead</span><span class="p">(</span><span class="n">loadeddict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">loadeddict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ForceWindowSize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MakePlane</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">ForceWindowSize</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MakePlane</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AddNulls</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.py3p&#39;</span><span class="p">,</span><span class="s1">&#39;.p&#39;</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">DefWipe</span><span class="p">:</span>
            <span class="c1"># print(&#39;Loading Pickle for &#39; , self.PickleFile.replace(&#39;.py3p&#39;,&#39;.p&#39;))</span>
            <span class="n">loadeddict</span> <span class="o">=</span> <span class="n">ReadPickleWrap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.py3p&#39;</span><span class="p">,</span><span class="s1">&#39;.p&#39;</span><span class="p">))</span>
            <span class="n">loadeddict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FixRead</span><span class="p">(</span><span class="n">loadeddict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">loadeddict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.p&#39;</span><span class="p">,</span><span class="s1">&#39;.py3p&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetFuns</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ForceWindowSize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MakePlane</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">ForceWindowSize</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MakePlane</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AddNulls</span><span class="p">()</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.py3p&#39;</span><span class="p">,</span><span class="s1">&#39;.p&#39;</span><span class="p">)):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Plot FNF:&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;or py2 plot FNF:&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">PickleFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.py3p&#39;</span><span class="p">,</span><span class="s1">&#39;.p&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Plotting.MakePlane"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.MakePlane">[docs]</a>    <span class="k">def</span> <span class="nf">MakePlane</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">window_size</span> <span class="o">=</span> <span class="p">[</span><span class="mf">12.</span><span class="p">,</span><span class="mf">12.275</span><span class="p">],</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;window_size&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_size</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_size</span> <span class="o">=</span> <span class="n">window_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">window_size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span></div>


<div class="viewcode-block" id="Plotting.ClearFigure"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.ClearFigure">[docs]</a>    <span class="k">def</span> <span class="nf">ClearFigure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_plane</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span></div>
        <span class="c1"># self.plot_plane.cla()</span>
        <span class="c1"># self.figure.clf()</span>

<div class="viewcode-block" id="Plotting.ShowFigure"><a class="viewcode-back" href="../PlotData.html#PlotData.Plotting.ShowFigure">[docs]</a>    <span class="k">def</span> <span class="nf">ShowFigure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Test_Papers_FF"><a class="viewcode-back" href="../PlotData.html#PlotData.Test_Papers_FF">[docs]</a><span class="k">def</span> <span class="nf">Test_Papers_FF</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">QuantityLists</span> <span class="k">as</span> <span class="nn">ql</span>
    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">mkdir_p</span><span class="p">(</span><span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/&#39;</span><span class="p">)</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/Paper_FF.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Neutron EDM Chiral Plot (Not $\alpha$ Rotated)&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$m_{\pi}[MeV]$&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{n}</span><span class="s1">[efm]$&#39;</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">cycle</span>
    <span class="n">colcyc</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">colourset8</span><span class="p">)</span>
    <span class="n">symcyc</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">markerset</span><span class="p">)</span>
    <span class="n">shiftcyc</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">shiftset</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_1512_00566_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_1510_05823_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_1502_02295_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_0808_1428_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_0512004_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_0505022_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>



<div class="viewcode-block" id="Test_Paper_Single"><a class="viewcode-back" href="../PlotData.html#PlotData.Test_Paper_Single">[docs]</a><span class="k">def</span> <span class="nf">Test_Paper_Single</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">QuantityLists</span> <span class="k">as</span> <span class="nn">ql</span>
    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">mkdir_p</span><span class="p">(</span><span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs&#39;</span><span class="p">)</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/Paper_FF_Single.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Neutron EDM Chiral Plot (Not $\alpha$ Rotated)&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$m_{\pi}[MeV]$&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{n}</span><span class="s1">[efm]$&#39;</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">cycle</span>
    <span class="n">colcyc</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">colourset8</span><span class="p">)</span>
    <span class="n">symcyc</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">markerset</span><span class="p">)</span>
    <span class="n">shiftcyc</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">shiftset</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">icol</span><span class="p">,</span><span class="n">coldata</span> <span class="ow">in</span> <span class="n">ql</span><span class="o">.</span><span class="n">FF_0512004_plot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">colcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">symcyc</span><span class="p">)</span>
        <span class="n">coldata</span><span class="p">[</span><span class="s1">&#39;shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">shiftcyc</span><span class="p">)</span>
        <span class="n">data_plot</span><span class="o">.</span><span class="n">AppendData</span><span class="p">(</span><span class="n">coldata</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>

<div class="viewcode-block" id="Test_Plot"><a class="viewcode-back" href="../PlotData.html#PlotData.Test_Plot">[docs]</a><span class="k">def</span> <span class="nf">Test_Plot</span><span class="p">():</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
    <span class="n">yerrdata</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.6</span><span class="p">]</span>
    <span class="n">ydata_2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">yerrdata_2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">0.6</span><span class="p">]</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">]),</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])))]))</span>
    <span class="n">indicies</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span><span class="s1">&#39;number&#39;</span><span class="p">])</span>
    <span class="n">yseries</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">ydata</span><span class="o">+</span><span class="n">ydata_2</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span>
    <span class="n">yerrseries</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">yerrdata</span><span class="o">+</span><span class="n">yerrdata_2</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">indicies</span><span class="p">)</span>
    <span class="c1"># this_data = [[xdata,ydata,yerrdata],[ydata,xdata,yerrdata]]</span>

    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar_vary&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yseries</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yerrseries</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;test data 1&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;test_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>


    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar_vary&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;key_select&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yseries</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yerrseries</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;test data 2&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;test_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>


    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/plotting_test.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test Graph&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test x&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test y&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>

<div class="viewcode-block" id="mpi701_plot"><a class="viewcode-back" href="../PlotData.html#PlotData.mpi701_plot">[docs]</a><span class="k">def</span> <span class="nf">mpi701_plot</span><span class="p">():</span>
    <span class="n">load_file</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/mpi701.csv&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">load_file</span><span class="p">)</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Q&#39;</span><span class="p">]</span>
    <span class="n">yerrdata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Qerr&#39;</span><span class="p">]</span>
    <span class="c1"># this_data = [[xdata,ydata,yerrdata],[ydata,xdata,yerrdata]]</span>

    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yerrdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$m_{\pi}=701 MeV$&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;mpi701&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">load_file</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/mpi701_updown.csv&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">load_file</span><span class="p">)</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Q2&#39;</span><span class="p">]</span>
    <span class="n">yup</span><span class="p">,</span><span class="n">ydown</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;yup&#39;</span><span class="p">],</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;ydown&#39;</span><span class="p">]</span>
    <span class="n">yavg</span> <span class="o">=</span> <span class="p">(</span><span class="n">yup</span> <span class="o">+</span> <span class="n">ydown</span><span class="p">)</span><span class="o">/</span><span class="mf">2.</span>
    <span class="n">yerr</span> <span class="o">=</span> <span class="p">(</span><span class="n">yup</span> <span class="o">-</span> <span class="n">ydown</span><span class="p">)</span><span class="o">/</span><span class="mf">2.</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_band&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fillalpha</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yavg</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yerr</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$Par2 = 18.6(478)\times 10^{-4}$&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;mpi701_fitband&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">load_file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span><span class="s1">&#39;.pdf&#39;</span><span class="p">)</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$m_{\pi}=701 MeV$ Form Factor plot&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$Q^</span><span class="si">{2}</span><span class="s1">[GeV]^</span><span class="si">{2}</span><span class="s1">$&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$F(Q^</span><span class="si">{2}</span><span class="s1">)$&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>

<div class="viewcode-block" id="Plot_E_Jangho"><a class="viewcode-back" href="../PlotData.html#PlotData.Plot_E_Jangho">[docs]</a><span class="k">def</span> <span class="nf">Plot_E_Jangho</span><span class="p">():</span>
    <span class="n">L16_jangho_file</span> <span class="o">=</span> <span class="s1">&#39;./Configs/t2_energy_16X32.dat&#39;</span>
    <span class="n">L20_jangho_file</span> <span class="o">=</span> <span class="s1">&#39;./Configs/t2_energy_20X40.dat&#39;</span>
    <span class="n">L28_jangho_file</span> <span class="o">=</span> <span class="s1">&#39;./Configs/t2_energy_28X56.dat&#39;</span>
    <span class="n">L16_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">L16_jangho_file</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="n">L20_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">L20_jangho_file</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="n">L28_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">L28_jangho_file</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>




    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L16_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L16_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L16_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Jangho_L16&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;Jangho_L16&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>


    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L20_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L20_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L20_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Jangho_L20&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;Jangho_L20&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>


    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L28_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L28_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">L28_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Jangho_L28&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;Jangho_L28&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>


    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/Jangho_E.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Jangho E plot&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$\sqrt</span><span class="si">{8t}</span><span class="s1"> fm$&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$t^2 E(t)$&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>


<div class="viewcode-block" id="Plot_one_on_x"><a class="viewcode-back" href="../PlotData.html#PlotData.Plot_one_on_x">[docs]</a><span class="k">def</span> <span class="nf">Plot_one_on_x</span><span class="p">():</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;plot&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$1/x$&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;one_on_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/one_on_x.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>


<div class="viewcode-block" id="Plot_one_on_x2"><a class="viewcode-back" href="../PlotData.html#PlotData.Plot_one_on_x2">[docs]</a><span class="k">def</span> <span class="nf">Plot_one_on_x2</span><span class="p">():</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;plot&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$1/x^</span><span class="si">{2}</span><span class="s1">$&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;one_on_x2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/one_on_x2.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>


<div class="viewcode-block" id="Plot_data"><a class="viewcode-back" href="../PlotData.html#PlotData.Plot_data">[docs]</a><span class="k">def</span> <span class="nf">Plot_data</span><span class="p">():</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>

    <span class="n">t0_dict</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">2.5377162290</span><span class="o">**-</span><span class="mi">1</span>  <span class="p">)</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">2.3999592122</span><span class="o">**-</span><span class="mi">1</span>  <span class="p">)</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">2.2590866059</span><span class="o">**-</span><span class="mi">1</span>  <span class="p">)</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">1.3628954894</span><span class="o">**-</span><span class="mi">1</span>  <span class="p">)</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">2.2386627909</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">4.9885618908</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">t0_dict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>     <span class="mf">3.2060027740</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">val_data</span> <span class="o">=</span><span class="p">[]</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">5.56</span><span class="p">)</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">5.40</span><span class="p">)</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">4.31</span><span class="p">)</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">7.00</span><span class="p">)</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">6.21</span><span class="p">)</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">2.80</span><span class="p">)</span>
    <span class="n">val_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">2.51</span><span class="p">)</span>

    <span class="n">err_data</span> <span class="o">=</span><span class="p">[]</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">57</span><span class="p">)</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">31</span><span class="p">)</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">34</span><span class="p">)</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">29</span><span class="p">)</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">err_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">.</span><span class="mi">11</span><span class="p">)</span>

    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t0_dict</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val_data</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">err_data</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$bvst0$&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;bvst&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/testbvst0.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>


<div class="viewcode-block" id="Test_Vertical"><a class="viewcode-back" href="../PlotData.html#PlotData.Test_Vertical">[docs]</a><span class="k">def</span> <span class="nf">Test_Vertical</span><span class="p">():</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">xdata_err</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.2</span><span class="p">]</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span><span class="s1">&#39;second&#39;</span><span class="p">,</span><span class="s1">&#39;third&#39;</span><span class="p">]</span>

    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vertical_comp&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata_err</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;test data 1&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;test_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">xdata</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">2.3</span><span class="p">,</span><span class="mf">2.9</span><span class="p">]</span>
    <span class="n">xdata_err</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.6</span><span class="p">]</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span><span class="s1">&#39;second&#39;</span><span class="p">,</span><span class="s1">&#39;third&#39;</span><span class="p">]</span>

    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vertical_comp&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydata</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xdata_err</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;test data 2&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">this_data</span><span class="p">[</span><span class="s1">&#39;test_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/plotting_vertical_test.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test Graph&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Test x&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;do_yTicks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;custom_yTicks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydata</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;flip_vert&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data_plot</span></div>

<div class="viewcode-block" id="PlotVerticalFF"><a class="viewcode-back" href="../PlotData.html#PlotData.PlotVerticalFF">[docs]</a><span class="k">def</span> <span class="nf">PlotVerticalFF</span><span class="p">():</span>
    <span class="n">proton_data</span> <span class="o">=</span>  <span class="p">[[</span><span class="mf">0.0010079328</span>  <span class="p">,</span>       <span class="mf">0.0034758078</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0044561429</span>  <span class="p">,</span>       <span class="mf">0.0039538850</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0077703240</span>  <span class="p">,</span>       <span class="mf">0.0053808199</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0047786811</span>  <span class="p">,</span>       <span class="mf">0.0019648625</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0012232888</span>  <span class="p">,</span>       <span class="mf">0.0014899462</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0033306877</span>  <span class="p">,</span>       <span class="mf">0.0011865317</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0015</span><span class="p">,</span>               <span class="mf">0.0012</span>      <span class="p">]]</span>
    <span class="n">proton_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">proton_data</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">proton_reg_data</span> <span class="o">=</span>  <span class="p">[[</span><span class="mf">0.0097469286</span><span class="p">,</span>         <span class="mf">0.0101082906</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0244738562</span><span class="p">,</span>         <span class="mf">0.0086827601</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0158147934</span><span class="p">,</span>         <span class="mf">0.0065204519</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0046260510</span><span class="p">,</span>         <span class="mf">0.0030003191</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0110612221</span><span class="p">,</span>         <span class="mf">0.0027490774</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0104692136</span><span class="p">,</span>         <span class="mf">0.0021217705</span><span class="p">],</span>
                        <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">),</span>          <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">)]]</span>
    <span class="n">proton_reg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">proton_reg_data</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">neutron_data</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mf">0.0027427186</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0020366178</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">0.0090425286</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0026530306</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">0.0045497951</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0026048519</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">0.0048066811</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0013261060</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">0.0039329034</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0009744109</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">0.0044391948</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0010265582</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">0.0012</span><span class="p">,</span>               <span class="mf">0.00071</span>     <span class="p">]]</span>
    <span class="n">neutron_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">neutron_data</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">neutron_reg_data</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mf">0.0008634479</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0047161559</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">0.0059997293</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0052951803</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">0.0034944067</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0066306628</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">0.0043127663</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0020129885</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">0.0063366154</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0020263376</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">0.0023034675</span><span class="p">,</span>        <span class="o">-</span><span class="mf">0.0013321665</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">0.0010</span><span class="p">,</span>          <span class="mf">0.0014</span><span class="p">]]</span>
    <span class="n">neutron_reg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">neutron_reg_data</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ens_list</span> <span class="o">=</span> <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$M_1$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;$M_2$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;$M_3$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;$A_1$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;$A_2$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;$A_3$&#39;</span><span class="p">,</span><span class="s1">&#39;Phys.&#39;</span><span class="p">]</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vertical_comp&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neutron_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ens_list</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neutron_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{n}</span><span class="s1">$ Improved&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">neutron_data</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">this_data</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{n}</span><span class="s1">$ Improved&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vertical_comp&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neutron_reg_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ens_list</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neutron_reg_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{n}</span><span class="s1">$ Standard&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">neutron_reg_data</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">this_data</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{n}</span><span class="s1">$ Standard&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>

    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vertical_comp&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ens_list</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Improved&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proton_data</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">this_data</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Improved&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>

    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;vertical_comp&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_reg_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ens_list</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;xerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_reg_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Standard&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;do_band&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proton_reg_data</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">this_data</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Standard&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>


    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/EDM_vert_comp.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;$d_{p/n}$&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;do_yTicks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;custom_yTicks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ens_list</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">data_plot</span></div>


<div class="viewcode-block" id="Proton_reg_plot"><a class="viewcode-back" href="../PlotData.html#PlotData.Proton_reg_plot">[docs]</a><span class="k">def</span> <span class="nf">Proton_reg_plot</span><span class="p">():</span>
    <span class="n">this_info</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;save_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_dir</span><span class="o">+</span><span class="s1">&#39;/TestGraphs/dp_old.pdf&#39;</span>
    <span class="n">this_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="c1"># this_info[&#39;xlims&#39;] = [0,10]</span>
    <span class="c1"># this_info[&#39;ylims&#39;] = [0,15]</span>

    <span class="n">proton_reg_data</span> <span class="o">=</span>  <span class="p">[[</span><span class="mf">0.0097469286</span><span class="p">,</span>         <span class="mf">0.0101082906</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0244738562</span><span class="p">,</span>         <span class="mf">0.0086827601</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0158147934</span><span class="p">,</span>         <span class="mf">0.0065204519</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0046260510</span><span class="p">,</span>         <span class="mf">0.0030003191</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0110612221</span><span class="p">,</span>         <span class="mf">0.0027490774</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0104692136</span><span class="p">,</span>         <span class="mf">0.0021217705</span><span class="p">]]</span>
    <span class="n">proton_reg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">proton_reg_data</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">proton_data</span> <span class="o">=</span>  <span class="p">[[</span><span class="mf">0.0010079328</span>  <span class="p">,</span>       <span class="mf">0.0034758078</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0044561429</span>  <span class="p">,</span>       <span class="mf">0.0039538850</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0077703240</span>  <span class="p">,</span>       <span class="mf">0.0053808199</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0047786811</span>  <span class="p">,</span>       <span class="mf">0.0019648625</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0012232888</span>  <span class="p">,</span>       <span class="mf">0.0014899462</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0033306877</span>  <span class="p">,</span>       <span class="mf">0.0011865317</span><span class="p">],</span>
                    <span class="p">[</span><span class="mf">0.0015</span><span class="p">,</span>               <span class="mf">0.0012</span>      <span class="p">]]</span>
    <span class="n">proton_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">proton_data</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">mpi_list</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">409.666</span><span class="p">,</span> <span class="mf">567.614</span><span class="p">,</span> <span class="mf">699.020</span><span class="p">,</span> <span class="mf">710.017</span><span class="p">,</span> <span class="mf">676.309</span><span class="p">,</span> <span class="mf">660.353</span><span class="p">,</span> <span class="mf">137.54</span><span class="p">]</span>
    <span class="n">this_data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpi_list</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_reg_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_reg_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Standard&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Standard&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>
    <span class="n">hold_series</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error_bar&#39;</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;x_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpi_list</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;y_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;yerr_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proton_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">hold_series</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Improved&#39;</span>
    <span class="n">this_data</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$d_</span><span class="si">{p}</span><span class="s1">$ Improved&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hold_series</span>
    <span class="n">data_plot</span> <span class="o">=</span> <span class="n">Plotting</span><span class="p">(</span><span class="n">plot_data</span><span class="o">=</span><span class="n">this_data</span><span class="p">,</span><span class="n">plot_info</span><span class="o">=</span><span class="n">this_info</span><span class="p">)</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PlotAll</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">ShowFigure</span><span class="p">()</span>
    <span class="n">data_plot</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">Test_Plot</span><span class="p">()</span>
    <span class="c1"># PlotVerticalFF()</span>
    <span class="c1"># data_plot = Test_Papers_FF()</span>
    <span class="c1"># data_plot = Test_Vertical()</span>
    <span class="c1"># data_plot = PlotVerticalFF()</span>



    <span class="c1"># # %matplotlib inline</span>
    <span class="c1"># import sys</span>
    <span class="c1"># if len(sys.argv) &lt; 2:</span>
    <span class="c1">#     print &#39;Pease pass file name&#39;</span>
    <span class="c1">#     print &#39;defaulting to test graph&#39;</span>
    <span class="c1">#     plot_fn = &#39;/home/jackdra/PHD/CHROMA/TestVar/scratch/resultsChiDistDebug/graphs/AlphaFull/Set1_Alpha_tsum.pdf&#39;</span>
    <span class="c1">#     print plot_fn</span>
    <span class="c1"># elif not os.path.isfile(sys.arvg[1]):</span>
    <span class="c1">#     print &#39;File not found:&#39;</span>
    <span class="c1">#     print sys.arvg[1]</span>
    <span class="c1">#     print &#39;defaulting to test graph&#39;</span>
    <span class="c1">#     plot_fn = &#39;/home/jackdra/PHD/CHROMA/TestVar/scratch/resultsChiDistDebug/graphs/AlphaFull/Set1_Alpha_tsum.pdf&#39;</span>
    <span class="c1">#     print plot_fn</span>
    <span class="c1"># else:</span>
    <span class="c1">#     plot_fn = sys.argv[1]</span>
    <span class="c1"># this_info = pa.Series()</span>
    <span class="c1"># this_info[&#39;save_file&#39;] = plot_fn</span>
    <span class="c1"># this_info[&#39;show_figure&#39;] = True</span>
    <span class="c1"># data_plot = Plotting(plot_info=this_info)</span>
    <span class="c1"># data_plot.LoadPickle(DefWipe=False)</span>
    <span class="c1"># data_plot.PlotAll()</span>
    <span class="c1"># data_plot.ShowFigure()</span>
    <span class="c1"># data_plot.PrintData()</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jack Dragos

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>